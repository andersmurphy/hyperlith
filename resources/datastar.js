// Datastar v1.0.0
var pt=/ðŸ–•JS_DSðŸš€/.source,Ae=pt.slice(0,5),ie=pt.slice(4),L="datastar",ft="Datastar-Request",dt=1e3,mt="type module",gt=!1,bt=!1,yt=!0,qe="morph",ht="inner",St="outer",vt="prepend",Et="append",Tt="before",At="after",xt="upsertAttributes",wt=qe,We="datastar-merge-fragments",$e="datastar-merge-signals",Ge="datastar-remove-fragments",_e="datastar-remove-signals",je="datastar-execute-script";var m=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(m||{});var X=`${L}-signal-change`;var me=new Set,we=new Set,Re=new Set;function Me(e){me.clear(),we.clear(),Re.clear();let t=e();return(me.size||we.size||Re.size)&&document.dispatchEvent(new CustomEvent(X,{detail:{added:[...me],removed:[...we],updated:[...Re]}})),t}var O=new Array,B=new Map;function se(){return O}function Je(e){return B.get(e)}function kn(e){let t=new Array,n=0,r=O.length-1,i=a=>a!==e&&!a.startsWith(`${e}.`);for(;n<=r;){let a=Math.floor((n+r)/2),o=O[a];if(o<e)n=a+1;else if(o>e)r=a-1;else{let s=a;do{let c=O[s];if(i(c))break;s--}while(s>=0);let l=a;do{let c=O[l];if(i(c))break;l++}while(l<O.length);for(let c=s+1;c<l;c++)t.push(O[c]);return t}}return t}function Rt(e,t){t.path=e,Xe(e),O.push(e),B.set(e,t),O.sort(),me.add(e)}function $(e,t){let n=B.get(e);if(n){if(!(n instanceof oe))return;n.value=t}else ge(e,t)}function ae(e){return B.get(e)?.value}function le(e,t){let n=!1,r=B.get(e);return r||(n=!0,r=ge(e,t)),{dep:r,inserted:n}}function De(e,t=!1){let n=Mt(e);for(let[r,i]of Object.entries(n))B.has(r)&&t||$(r,i)}function Xe(...e){for(let t of e){let n=kn(t);for(let r of n){B.delete(r);let i=O.indexOf(r);i>-1&&O.splice(i,1),we?.add(r)}}}function Pe(e=!0,t=!1){return JSON.stringify(Ln(t),null,e?2:0)}function Ln(e,...t){let n=new Map;for(let i of O)if(!(e&&i.match(/^_|\._/))){if(t.length>0){let a=!1;for(let o of t)if(i.startsWith(o)){a=!0;break}if(!a)continue}n.set(i,B.get(i)?.value)}return In(n)}function Nn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mt(e,t=[],n="."){return Object.keys(e).reduce((r,i)=>Object.assign({},r,Nn(e[i])?Mt(e[i],t.concat([i]),n):{[t.concat([i]).join(n)]:e[i]}),{})}function In(e,t="."){let n={};for(let[r,i]of e.entries()){let a=r.split(t),o=n;for(let s=0;s<a.length-1;s++){let l=a[s];o[l]||(o[l]={}),o=o[l]}o[a[a.length-1]]=i}return n}function _(e,t,n,...r){return Me(()=>e(...r,...n.map((i,a)=>t[a]?i:i.value)))}function Ue(e){e.flags&=-249;let t=e.currentValue,n=e.getter();return t!==n?(e.currentValue=n,!0):!1}function Ke(e){let t=e.flags;return(t&32||t&64&&Vn(e,t))&&(e.flags&=-249,e.run()),!0}var xe=[];function ge(e,t){let n=new oe(e,t);return O.push(e),B.set(e,n),O.sort(),me.add(e),n}var oe=class{constructor(t,n){this.path=t;this.currentValue=n}get value(){return this.currentValue}set value(t){if(this.currentValue!==t){this.currentValue=t,Re.add(this.path);let n=this.subs;if(n){let r=n.nextSub,i,a=0,o=32;e:do{let s=n.sub,l=s.flags,c=!1;if(l&244?l&16&&!(l&4)?(s.flags=l&-17|o|8,c=!0):!(l&224)&&ze(n,s)&&(s.flags=l|16|o|8,c=!!s.subs):(s.flags=l|o|8,c=!0),c){let u=s.subs;if(u){n=u,u.nextSub?(i={target:r,linked:i},++a,r=n.nextSub,o=64):o=l&2?128:64;continue}l&2&&(Ke(s)||(s.flags&=-9))}else l&(4|o)?!(l&o)&&l&224&&ze(n,s)&&(s.flags=l|o):(s.flags=l|o|8,(l&10)===2&&(Ke(s)||(s.flags&=-9)));if(n=r){r=n.nextSub,o=a?64:32;continue}for(;a--;)if(n=i.target,i=i.linked,n){r=n.nextSub,o=a?64:32;continue e}break}while(!0)}}}};function Dt(e,t){switch(e.length){case 0:return t;case 1:return()=>t(e[0].value);case 2:return()=>t(e[0].value,e[1].value);case 3:return()=>t(e[0].value,e[1].value,e[2].value);case 4:return()=>t(e[0].value,e[1].value,e[2].value,e[3].value)}let n=e.length;return xe[n]||(xe[n]=Array(n)),()=>{for(let r=0;r<n;r++)xe[n][r]=e[r].value;return t(...xe[n])}}function Ye(e,t){let n={path:"",flags:33,getter:Dt(e,t),get value(){let r=n.flags;if(r&96)if(r&32||Ct(n.deps)){if(Ue(n)){let i=n.subs;i&&Be(i)}}else n.flags=r&-65;return n.currentValue}};for(let r of e)Pt(r,n);return n}function Ze(e,t){let n={run:Dt(e,t),flags:2};for(let r of e)Pt(r,n);return n.run(),()=>{if(n.depsTail=void 0,n.flags&=-249,n.flags|=4,n.deps){let r=n.deps;do{let i=r.dep,a=r.nextDep,o=r.nextSub,s=r.prevSub;if(o?o.prevSub=s:i.subsTail=s,s?s.nextSub=o:i.subs=o,i.subs&&"deps"in i){let l=i.flags;l&32||(i.flags=l|32);let c=i.deps;if(c){r=c,i.depsTail.nextDep=a,i.deps=void 0,i.depsTail=void 0;continue}}r=a}while(r);n.deps=void 0}n.flags&=-5}}function Pt(e,t){let n=t.depsTail;if(n&&n.dep===e)return;let r=n?n.nextDep:t.deps;if(r&&r.dep===e){t.depsTail=r;return}let i=e.subsTail;if(i&&i.sub===t&&ze(i,t))return;let a={dep:e,sub:t,nextDep:r,prevSub:void 0,nextSub:void 0};if(n===void 0?t.deps=a:n.nextDep=a,e.subs===void 0)e.subs=a;else{let o=e.subsTail;a.prevSub=o,o.nextSub=a}return t.depsTail=a,e.subsTail=a,a}function Vn(e,t){return Ct(e.deps)?(e.flags=t|32,!0):(e.flags=t&-65,!1)}function Ct(e){let t,n=0,r;e:do{r=!1;let i=e.dep;if("flags"in i){let a=i.flags;if((a&33)===33){if(Ue(i)){let o=i.subs;o.nextSub&&Be(o),r=!0}}else if((a&65)===65){(e.nextSub||e.prevSub)&&(t={target:e,linked:t}),e=i.deps,++n;continue}}if(!r&&e.nextDep){e=e.nextDep;continue}for(;n;){--n;let a=e.sub,o=a.subs;if(r){if(Ue(a)){o.nextSub?(e=t.target,t=t.linked,Be(o)):e=o;continue}}else a.flags&=-65;if(o.nextSub?(e=t.target,t=t.linked):e=o,e.nextDep){e=e.nextDep;continue e}r=!1}return r}while(!0)}function Be(e){do{let t=e.sub,n=t.flags;(n&96)===64&&(t.flags=n|32|8,(n&10)===2&&(Ke(t)||(t.flags&=-9))),e=e.nextSub}while(e)}function ze(e,t){let n=t.depsTail;if(n){let r=t.deps;do{if(r===e)return!0;if(r===n)break;r=r.nextDep}while(r)}return!1}var Y=e=>e.trim()==="true",z=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase()),be=e=>z(e).replace(/-./g,t=>t[1].toUpperCase()),ye=e=>z(e).replace(/-/g,"_"),On=e=>be(e).replace(/^./,t=>t[0].toUpperCase()),Ce=e=>new Function(`return Object.assign({}, ${e})`)(),Z=e=>e.startsWith("$")?e.slice(1):e,Hn={kebab:z,snake:ye,pascal:On};function C(e,t){for(let n of t.get("case")||[]){let r=Hn[n];r&&(e=r(e))}return e}var qn="computed",Ft={type:1,name:qn,keyReq:1,valReq:1,onLoad:({key:e,mods:t,genRX:n,computed:r,batch:i})=>{e=C(e,t);let{deps:a,rxFn:o}=n(),s=r(a,o);i(()=>{Rt(e,s)})}};var kt={type:1,name:"signals",onLoad:e=>{let{key:t,mods:n,value:r,genRX:i,batch:a}=e,o=n.has("ifmissing"),{rxFn:s}=i();if(t!==""){let l=C(t,n),c=r===""?r:s();a(()=>{o?le(l,c):$(l,c)})}else{let l=Ce(e.value);e.value=JSON.stringify(l);let c=s();a(()=>{De(c,o)})}}};var Lt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var ce=class{#e=0;#t;constructor(t=L){this.#t=t}with(t){if(typeof t=="string")for(let n of t.split(""))this.with(n.charCodeAt(0));else typeof t=="boolean"?this.with(1<<(t?7:3)):this.#e=this.#e*33^t;return this}get value(){return this.#e}get string(){return this.#t+Math.abs(this.#e).toString(36)}};function Fe(e){if(e.id)return e.id;let t=new ce;for(let[r,i]of Object.entries(e.dataset))t.with(r).with(i||"");let n=e;for(;n;){if(t.with(n.tagName||""),n.id){t.with(n.id);break}let r=n?.parentNode;r&&t.with([...r.children].indexOf(n)),n=r}return t.string}function he(e,t){return new ce().with(e).with(t).value}function ue(e,t){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let n=e.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||t(e);let r=e.firstElementChild;for(;r;)ue(r,t),r=r.nextElementSibling}var Wn="https://data-star.dev/errors";function Nt(e,t,n={}){let r=new Error;r.name=`${L} ${e} error`;let i=ye(t),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${Wn}/${e}/${i}?${a}
Context: ${o}`,r}function H(e,t,n={}){let r={plugin:{name:t.plugin.name,type:m[t.plugin.type]}};return Nt("init",e,Object.assign(r,n))}function T(e,t,n={}){let r={plugin:{name:t.plugin.name,type:m[t.plugin.type]},element:{id:t.el.id,tag:t.el.tagName},expression:{rawKey:t.rawKey,key:t.key,value:t.value,validSignals:se(),fnContent:t.fnContent}};return Nt("runtime",e,Object.assign(r,n))}var Se={},et=[],ne=new Map,Qe=null,tt="";function It(e){tt=e}function ke(...e){for(let t of e){let n={plugin:t,actions:Se,removals:ne,applyToElement:Le,batch:Me,signal:ge,computed:Ye,effect:Ze},r;switch(t.type){case 3:{Se[t.name]=t;break}case 1:{let i=t;et.push(i),r=i.onGlobalInit;break}case 2:{r=t.onGlobalInit;break}default:throw H("InvalidPluginType",n)}r&&r(n)}et.sort((t,n)=>{let r=n.name.length-t.name.length;return r!==0?r:t.name.localeCompare(n.name)})}function nt(){queueMicrotask(()=>{Le(document.documentElement),$n()})}function Le(e){ue(e,t=>{let n=new Array,r=ne.get(t.id)||new Map,i=new Map([...r]),a=new Map;for(let[o,s]of Object.entries(t.dataset)){if(!o.startsWith(tt))break;let l=he(o,s||"");a.set(o,l),r.has(l)?i.delete(l):n.push(o)}for(let[o,s]of i)s();for(let o of n){let s=a.get(o);Gn(t,o,s)}})}function $n(){Qe||(Qe=new MutationObserver(e=>{let t=new Set,n=new Set;for(let{target:r,type:i,addedNodes:a,removedNodes:o}of e)switch(i){case"childList":{for(let s of o)t.add(s);for(let s of a)n.add(s)}break;case"attributes":{n.add(r);break}}for(let r of t)ue(r,i=>{let a=ne.get(i.id);if(a){for(let[o,s]of a)s();ne.delete(i.id)}});for(let r of n)Le(r)}),Qe.observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}))}function Gn(e,t,n){let r=be(t.slice(tt.length)),i=et.find(M=>new RegExp(`^${M.name}([A-Z]|_|$)`).test(r));if(!i)return;e.id.length||(e.id=Fe(e));let[a,...o]=r.slice(i.name.length).split(/\_\_+/),s=a.length>0;s&&(a=be(a));let l=e.dataset[t]||"",c=l.length>0,u={applyToElement:Le,actions:Se,removals:ne,genRX:()=>_n(u,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:a,value:l,mods:new Map,batch:Me,signal:ge,computed:Ye,effect:Ze},p=i.keyReq||0;if(s){if(p===2)throw T(`${i.name}KeyNotAllowed`,u)}else if(p===1)throw T(`${i.name}KeyRequired`,u);let d=i.valReq||0;if(c){if(d===2)throw T(`${i.name}ValueNotAllowed`,u)}else if(d===1)throw T(`${i.name}ValueRequired`,u);if(p===3||d===3){if(s&&c)throw T(`${i.name}KeyAndValueProvided`,u);if(!s&&!c)throw T(`${i.name}KeyOrValueRequired`,u)}for(let M of o){let[g,...y]=M.split(".");u.mods.set(be(g),new Set(y.map(S=>S.toLowerCase())))}let h=i.onLoad(u)??(()=>{}),b=ne.get(e.id);b||(b=new Map,ne.set(e.id,b)),b.set(n,h)}function _n(e,...t){let n=[],r=new Set,i="",a=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=e.value.trim().match(a);if(o){let g=o.length-1,y=o[g].trim();y.startsWith("return")||(o[g]=`return (${y});`),i=o.join(`;
`)}let s=new Map,l=new RegExp(`(?:${Ae})(.*?)(?:${ie})`,"gm");for(let g of i.matchAll(l)){let y=g[1],S=new ce("dsEscaped").with(y).string;s.set(S,y),i=i.replace(Ae+y+ie,S)}let c=(g,y)=>`${g}${ye(y).replaceAll(/\./g,"_")}`,u=new Set(t),p=se();if(p.length){let g=new RegExp(`\\$(${p.join("|")})(\\s*[+&^\\/*|-]?=[^=]|\\+\\+|--)`,"gm"),y=[...i.matchAll(g)],S=(A,x,f="")=>{i=i.replaceAll(`$${A[1]}`,x+f)};if(y.length){let A=`${L}Mut_`,x=new Set;for(let f of y){let D=f[1],v=Je(D),w=c(A,D);v&&!x.has(v)&&(r.add(v),x.add(v),n.push(!0),u.add(w)),S(f,`${w}`,".value")}}let F=new RegExp(`\\$(${p.join("|")})(\\W|$)`,"gm"),I=[...i.matchAll(F)];if(I.length){let A=`${L}Pure_`,x=new Set;for(let f of I){let D=f[1],v=Je(D),w=c(A,D);v&&!x.has(v)&&(r.add(v),x.add(v),n.push(!1),u.add(w)),S(f,w)}}}let d=new Set,h=new RegExp(`@(${Object.keys(Se).join("|")})\\(`,"gm"),b=[...i.matchAll(h)],M=new Set;if(b.length){let g=`${L}Act_`;for(let y of b){let S=y[1],F=Se[S];if(!F)continue;d.add(S);let I=c(g,S);u.add(I),i=i.replace(`@${S}(`,`${I}(`),M.add((...A)=>F.fn(e,...A))}}for(let[g,y]of s)i=i.replace(g,y);e.fnContent=i;try{let g=new Function("el",...u,i);return{dm:n,deps:[...r],rxFn:(...y)=>{try{return g(e.el,...y,...M)}catch(S){throw T("ExecuteExpression",e,{error:S.message})}}}}catch(g){throw T("GenerateExpression",e,{error:g.message})}}ke(Lt,kt,Ft);var Q=`${L}-sse`,Ne="started",Ie="finished",Vt="error",Ot="retrying",Ht="retrying";function j(e,t){document.addEventListener(Q,n=>{if(n.detail.type!==e)return;let{argsRaw:r}=n.detail;t(r)})}function pe(e,t,n){document.dispatchEvent(new CustomEvent(Q,{detail:{type:e,elId:t,argsRaw:n}}))}var qt=e=>`${e}`.includes("text/event-stream"),U=async(e,t,n,r)=>{let{el:i}=e,a=i.id,{headers:o,contentType:s,includeLocal:l,selector:c,openWhenHidden:u,retryInterval:p,retryScaler:d,retryMaxWaitMs:h,retryMaxCount:b,abort:M}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:dt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),g=t.toLowerCase(),y=()=>{};try{if(!n?.length)throw T("SseNoUrlProvided",e,{action:g});let S={};S[ft]=!0,s==="json"&&(S["Content-Type"]="application/json");let F=Object.assign({},S,o),I={method:t,headers:F,openWhenHidden:u,retryInterval:p,retryScaler:d,retryMaxWaitMs:h,retryMaxCount:b,signal:M,onopen:async f=>{if(f.status>=400){let D=f.status.toString();pe(Vt,a,{status:D})}},onmessage:f=>{if(!f.event.startsWith(L))return;let D=f.event,v={},w=f.data.split(`
`);for(let E of w){let V=E.indexOf(" "),W=E.slice(0,V),R=v[W];R||(R=[],v[W]=R);let k=E.slice(V+1);R.push(k)}let P={};for(let[E,V]of Object.entries(v))P[E]=V.join(`
`);pe(D,a,P)},onerror:f=>{if(qt(f))throw T("InvalidContentType",e,{url:n});f&&(console.error(f.message),pe(Ot,a,{message:f.message}))}},A=new URL(n,window.location.origin),x=new URLSearchParams(A.search);if(s==="json"){let f=Pe(!1,!l);t==="GET"?x.set(L,f):I.body=f}else if(s==="form"){let f=c?document.querySelector(c):i.closest("form");if(f===null)throw c?T("SseFormNotFound",e,{action:g,selector:c}):T("SseClosestFormNotFound",e,{action:g});if(i!==f){let v=w=>w.preventDefault();f.addEventListener("submit",v),y=()=>f.removeEventListener("submit",v)}if(!f.checkValidity()){f.reportValidity(),y();return}let D=new FormData(f);if(t==="GET"){let v=new URLSearchParams(D);for(let[w,P]of v)x.set(w,P)}else I.body=D}else throw T("SseInvalidContentType",e,{action:g,contentType:s});pe(Ne,a,{}),A.search=x.toString();try{await Jn(A.toString(),a,I)}catch(f){if(!qt(f))throw T("SseFetchFailed",e,{method:t,url:n,error:f})}}finally{pe(Ie,a,{}),y()}};async function jn(e,t){let n=e.getReader(),r;for(r=await n.read();!r.done;)t(r.value),r=await n.read()}function Un(e){let t,n,r,i=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=Bn(t,o);let s=t.length,l=0;for(;n<s;){i&&(t[n]===10&&(l=++n),i=!1);let c=-1;for(;n<s&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:i=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===s?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function Kn(e,t,n){let r=Wt(),i=new TextDecoder;return function(o,s){if(o.length===0)n?.(r),r=Wt();else if(s>0){let l=i.decode(o.subarray(0,s)),c=s+(o[s+1]===32?2:1),u=i.decode(o.subarray(c));switch(l){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let p=Number.parseInt(u,10);Number.isNaN(p)||t(r.retry=p);break}}}}}function Bn(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Wt(){return{data:"",event:"",id:"",retry:void 0}}var zn="text/event-stream",$t="last-event-id";function Jn(e,t,{signal:n,headers:r,onopen:i,onmessage:a,onclose:o,onerror:s,openWhenHidden:l,fetch:c,retryInterval:u=1e3,retryScaler:p=2,retryMaxWaitMs:d=3e4,retryMaxCount:h=10,...b}){return new Promise((M,g)=>{let y=0,S={...r};S.accept||(S.accept=zn);let F;function I(){F.abort(),document.hidden||v()}l||document.addEventListener("visibilitychange",I);let A=0;function x(){document.removeEventListener("visibilitychange",I),window.clearTimeout(A),F.abort()}n?.addEventListener("abort",()=>{x(),M()});let f=c??window.fetch,D=i??function(){};async function v(){F=new AbortController;try{let w=await f(e,{...b,headers:S,signal:F.signal});await D(w),await jn(w.body,Un(Kn(P=>{P?S[$t]=P:delete S[$t]},P=>{u=P},a))),o?.(),x(),M()}catch(w){if(!F.signal.aborted)try{let P=s?.(w)??u;window.clearTimeout(A),A=window.setTimeout(v,P),u*=p,u=Math.min(u,d),y++,y>=h?(pe(Ht,t,{}),x(),g("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${P}ms.`)}catch(P){x(),g(P)}}}v()})}var Gt={type:3,name:"delete",fn:async(e,t,n)=>U(e,"DELETE",t,{...n})};var _t={type:3,name:"get",fn:async(e,t,n)=>U(e,"GET",t,{...n})};var jt={type:3,name:"patch",fn:async(e,t,n)=>U(e,"PATCH",t,{...n})};var Ut={type:3,name:"post",fn:async(e,t,n)=>U(e,"POST",t,{...n})};var Kt={type:3,name:"put",fn:async(e,t,n)=>U(e,"PUT",t,{...n})};var Bt={type:2,name:je,onGlobalInit:async e=>{j(je,({autoRemove:t=`${yt}`,attributes:n=mt,script:r})=>{let i=Y(t);if(!r?.length)throw H("NoScriptProvided",e);let a=document.createElement("script");for(let o of n.split(`
`)){let s=o.indexOf(" "),l=s?o.slice(0,s):o,c=s?o.slice(s):"";a.setAttribute(l.trim(),c.trim())}a.text=r,document.head.appendChild(a),i&&a.remove()})}};var ve=document,Ee=!!ve.startViewTransition;function K(e,t){if(t.has("viewtransition")&&Ee){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e}var rn="div",rt="value",st=e=>document.createElement(e),on=()=>st(rn),Xn=e=>`<${e}></${e}>`,zt=e=>[...e.querySelectorAll("[id]")],sn=e=>e instanceof Element,Jt=e=>e instanceof HTMLTemplateElement,Xt=e=>e instanceof HTMLInputElement,Yt=e=>e instanceof HTMLTextAreaElement,Zt=e=>e instanceof HTMLOptionElement,an={type:2,name:We,onGlobalInit:async e=>{let t=st("template");j(We,({fragments:n=Xn(rn),selector:r="",mergeMode:i=wt,useViewTransition:a="false"})=>{let o=Y(a);t.innerHTML=n.trim();let s=[...t.content.children];for(let l of s){if(!sn(l))throw H("NoFragmentsFound",e);let c=r||`#${l.getAttribute("id")}`,u=[...document.querySelectorAll(c)||[]];if(!u.length)throw H("NoTargetsFound",e,{selectorOrID:c});o&&Ee?ve.startViewTransition(()=>Qt(e,i,l,u)):Qt(e,i,l,u)}})}};function Qt(e,t,n,r){for(let i of r){i.dataset.fragmentMergeTarget="true";let a=n.cloneNode(!0);switch(t){case qe:{ue(a,o=>{!o.id?.length&&Object.keys(o.dataset).length&&(o.id=Fe(o));let s=e.removals.get(o.id);if(s){for(let[l,c]of Object.entries(o.dataset))if(l.startsWith("bind")){let u=he(l,c||""),p=s.get(u);if(p){s.delete(u);let d=he(u,u);s.set(d,p)}}}}),Yn(i,a);break}case ht:i.innerHTML=a.outerHTML;break;case St:i.replaceWith(a);break;case vt:i.prepend(a);break;case Et:i.append(a);break;case Tt:i.before(a);break;case At:i.after(a);break;case xt:for(let o of a.getAttributeNames()){let s=a.getAttribute(o);i.setAttribute(o,s)}break;default:throw H("InvalidMergeMode",e,{mergeMode:t})}}}var Te=on();Te.hidden=!0;var Ve,q=new Map,fe=new Set;function Yn(e,t){e instanceof Document&&(e=e.documentElement);let n,r=on();if(t instanceof Node)r.append(t),n=r;else{for(let h of[...t])r.append(h);n=r}let i=zt(n),a=zt(e);e.id&&a.push(e);let o=new Set,s=new Map;for(let{id:h,tagName:b}of a)s.has(h)?o.add(h):s.set(h,b);fe.clear();for(let{id:h,tagName:b}of i)fe.has(h)?o.add(h):s.get(h)===b&&fe.add(h);for(let h of o)fe.delete(h);q.clear(),nn(e.parentElement,a),nn(n,i),document.body.insertAdjacentElement("afterend",Te),Ve=e;let l=e.parentNode,c=e.previousSibling,u=e.nextSibling;ln(l,n,e,u);let p=new Array,d=c?.nextSibling||l.firstChild;for(;d&&d!==u;)p.push(d),d=d.nextSibling;return Te.remove(),p}function ln(e,t,n=null,r=null){Jt(e)&&Jt(t)&&(e=e.content,t=t.content),n??=e.firstChild;for(let i of t.childNodes){if(n&&n!==r){let o=Zn(i,n,r);if(o){if(o!==n){let s=n;for(;s&&s!==o;){let l=s;s=s.nextSibling,tn(l)}}it(o,i),n=o.nextSibling;continue}}if(sn(i)&&fe.has(i.id)){let o=i.id,s=`[id="${o}"]`,l=p=>p.querySelector(s),c=Ve.id===o&&Ve||l(Ve)||l(Te),u=c;for(;u=u.parentNode;){let p=q.get(u);p&&(p.delete(c.id),p.size||q.delete(u))}cn(e,c,n),it(c,i),n=c.nextSibling;continue}if(q.has(i)){let o=st(i.tagName);return e.insertBefore(o,n),it(o,i),o}let a=document.importNode(i,!0);e.insertBefore(a,n),a&&(n=a.nextSibling)}for(;n&&n!==r;){let i=n;n=n.nextSibling,tn(i)}}function Zn(e,t,n){let r=null,i=e.nextSibling,a=0,o=0,s=q.get(e)?.size||0,l=t;for(;l&&l!==n;){if(en(l,e)){let c=!1,u=q.get(l),p=q.get(e);if(p&&u){for(let d of u)if(p.has(d)){c=!0;break}}if(c)return l;if(!r&&!q.has(l)){if(!s)return l;r=l}}if(o+=q.get(l)?.size||0,o>s||(r===null&&i&&en(l,i)&&(a++,i=i.nextSibling,a>=2&&(r=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return r||null}function en(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.id||n.id===r.id)}function tn(e){q.has(e)?cn(Te,e,null):e.parentNode?.removeChild(e)}function cn(e,t,n=null){try{e.moveBefore(t,n)}catch{e.insertBefore(t,n)}}function it(e,t){let n=t.nodeType,r=e,i=t;if(n===1){let a=r.attributes,o=i.attributes;for(let s of o)r.getAttribute(s.name)!==s.value&&r.setAttribute(s.name,s.value);for(let s=a.length-1;0<=s;s--){let l=a[s];l&&(i.hasAttribute(l.name)||r.removeAttribute(l.name))}if(Xt(r)&&Xt(i)&&i.type!=="file"){let s=i.value,l=r.value;ot(r,i,"checked"),ot(r,i,"disabled"),i.hasAttribute(rt)?l!==s&&(r.setAttribute(rt,s),r.value=s):(r.value="",r.removeAttribute(rt))}else if(Zt(r)&&Zt(i))ot(r,i,"selected");else if(Yt(r)&&Yt(i)){let s=i.value,l=r.value;s!==l&&(r.value=s),r.firstChild&&r.firstChild.nodeValue!==s&&(r.firstChild.nodeValue=s)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),r.innerHTML!==i.innerHTML&&ln(r,i),e}function ot(e,t,n){let r=t,i=e,a=r[n],o=i[n];a!==o&&(i[n]=r[n],a?e.setAttribute(n,""):e.removeAttribute(n))}function nn(e,t){for(let n of t)if(fe.has(n.id)){let r=n;for(;r&&r!==e;){let i=q.get(r);i||(i=new Set,q.set(r,i)),i.add(n.id),r=r.parentElement}}}var un={type:2,name:$e,onGlobalInit:async({batch:e})=>{j($e,({signals:t="{}",onlyIfMissing:n=`${bt}`})=>{let r=Y(n),i=Ce(t);e(()=>De(i,r))})}};var pn={type:2,name:Ge,onGlobalInit:async e=>{j(Ge,({selector:t,useViewTransition:n=`${gt}`})=>{if(!t.length)throw H("NoSelectorProvided",e);let r=Y(n),i=document.querySelectorAll(t),a=()=>{for(let o of i)o.remove()};r&&Ee?ve.startViewTransition(()=>a()):a()})}};var fn={type:2,name:_e,onGlobalInit:async e=>{let{batch:t}=e;j(_e,({paths:n=""})=>{let r=n.split(`
`).map(i=>i.trim());if(!r?.length)throw H("NoPathsProvided",e);t(()=>{Xe(...r)})})}};var dn={type:1,name:"attr",valReq:1,onLoad:({el:e,key:t,genRX:n,computed:r,effect:i})=>{let{deps:a,rxFn:o}=n();if(t===""){let l=r(a,o);return i([l],async c=>{for(let[u,p]of Object.entries(c))p===!1?e.removeAttribute(u):e.setAttribute(u,p)})}t=z(t);let s=r(a,o);return i([s],async l=>{let c;typeof l=="string"?c=l:c=JSON.stringify(l),!c||c==="false"||c==="null"||c==="undefined"?e.removeAttribute(t):e.setAttribute(t,c)})}};var Qn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,mn=["change","input","keydown"],gn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,effect:a,batch:o}=e,s=t,l=n?C(n,r):Z(i),c=t.tagName.toLowerCase(),u=c.includes("input"),p=c.includes("select"),d=t.getAttribute("type"),h=t.hasAttribute("value"),b="",M=u&&d==="checkbox";M&&(b=h?"":!1);let g=u&&d==="number";g&&(b=0);let y=u&&d==="radio";y&&(t.getAttribute("name")?.length||t.setAttribute("name",l));let S=u&&d==="file",{dep:F,inserted:I}=o(()=>le(l,b)),A=-1;Array.isArray(F.value)&&(t.getAttribute("name")===null&&t.setAttribute("name",l),A=[...document.querySelectorAll(`[name="${l}"]`)].findIndex(E=>E===e.el));let x=A>=0,f=()=>[...ae(l)],D=()=>{let E=ae(l);x&&!p&&(E=E[A]||b);let V=`${E}`;if(M||y)typeof E=="boolean"?s.checked=E:s.checked=V===s.value;else if(p){let W=t;if(W.multiple){if(!x)throw T("BindSelectMultiple",e);for(let R of W.options){if(R?.disabled)continue;let k=g?Number(R.value):R.value;R.selected=E.includes(k)}}else W.value=V}else S||("value"in t?t.value=V:t.setAttribute("value",V))},v=async()=>{let E=ae(l);if(x){let k=E;for(;A>=k.length;)k.push(b);E=k[A]||b}let V=(k,J)=>{let G=J;x&&!p&&(G=f(),G[A]=J),$(k,G)};if(S){let k=[...s?.files||[]],J=[],G=[],ct=[];await Promise.all(k.map(ut=>new Promise(Fn=>{let te=new FileReader;te.onload=()=>{if(typeof te.result!="string")throw T("InvalidFileResultType",e,{resultType:typeof te.result});let He=te.result.match(Qn);if(!He?.groups)throw T("InvalidDataUri",e,{result:te.result});J.push(He.groups.contents),G.push(He.groups.mime),ct.push(ut.name)},te.onloadend=()=>Fn(void 0),te.readAsDataURL(ut)}))),o(()=>{V(l,J),V(`${l}Mimes`,G),V(`${l}Names`,ct)});return}let W=s.value||"",R;if(M){let k=s.checked||s.getAttribute("checked")==="true";h?R=k?W:"":R=k}else if(p){let J=[...t.selectedOptions];x?R=J.filter(G=>G.selected).map(G=>G.value):R=J[0]?.value||b}else typeof E=="boolean"?R=!!W:typeof E=="number"?R=Number(W):R=W||"";o(()=>{V(l,R)})};I&&v();for(let E of mn)t.addEventListener(E,v);let w=E=>{E.persisted&&v()};window.addEventListener("pageshow",w);let P=a([F],()=>D());return()=>{P();for(let E of mn)t.removeEventListener(E,v);window.removeEventListener("pageshow",w)}}};var bn={type:1,name:"class",valReq:1,onLoad:({el:e,key:t,mods:n,genRX:r,computed:i,effect:a})=>{let o=e.classList,{deps:s,rxFn:l}=r(),c=i(s,l);return a([c],u=>{if(t===""){let p=u;for(let[d,h]of Object.entries(p)){let b=d.split(/\s+/);h?o.add(...b):o.remove(...b)}}else{let p=z(t);p=C(p,n),u?o.add(p):o.remove(p)}})}};var yn={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,batch:a}=e,o=n?C(n,r):Z(i),{dep:s}=a(()=>le(o,!1));if(!(s instanceof oe))throw T("not_signal",e,{signalName:o});let l=c=>{let{type:u,elId:p}=c.detail;if(p===t.id)switch(u){case Ne:s.value=!0;break;case Ie:s.value=!1;break}};return document.addEventListener(Q,l),()=>{s.value=!1,document.removeEventListener(Q,l)}}};var hn={type:1,name:"jsonSignals",keyReq:2,valReq:2,onLoad:e=>{let{el:t}=e;t instanceof HTMLElement||T("JsonSignalsInvalidElement",e);let n=()=>{t.textContent=Pe(!0)};return n(),document.addEventListener(X,n),()=>{document.removeEventListener(X,n)}}};function ee(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return Number(t.replace("ms",""));if(t.endsWith("s"))return Number(t.replace("s",""))*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function re(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function at(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function er(e,t,n=!1,r=!0){let i=-1,a=()=>i&&clearTimeout(i);return(...o)=>{a(),n&&!i&&e(...o),i=setTimeout(()=>{r&&e(...o),a()},t)}}function tr(e,t,n=!0,r=!1){let i=!1;return(...a)=>{i||(n&&e(...a),i=!0,setTimeout(()=>{i=!1,r&&e(...a)},t))}}function de(e,t){let n=t.get("delay");if(n){let a=ee(n);e=at(e,a)}let r=t.get("debounce");if(r){let a=ee(r),o=re(r,"leading",!1),s=!re(r,"notrail",!1);e=er(e,a,o,s)}let i=t.get("throttle");if(i){let a=ee(i),o=!re(i,"noleading",!1),s=re(i,"trail",!1);e=tr(e,a,o,s)}return e}var Sn={type:1,name:"on",keyReq:1,valReq:1,argNames:["evt"],onLoad:({el:e,key:t,mods:n,genRX:r})=>{let i=e;n.has("window")&&(i=window);let{dm:a,deps:o,rxFn:s}=r(),l=d=>{d&&((n.has("prevent")||t==="submit")&&d.preventDefault(),n.has("stop")&&d.stopPropagation()),_(s,a,o,d)};l=de(l,n),l=K(l,n);let c={capture:!1,passive:!1,once:!1};if(n.has("capture")&&(c.capture=!0),n.has("passive")&&(c.passive=!0),n.has("once")&&(c.once=!0),n.has("outside")){i=document;let d=l;l=b=>{let M=b?.target;e.contains(M)||d(b)}}let p=z(t);return p=C(p,n),p===Q&&(i=document),i.addEventListener(p,l,c),()=>{i.removeEventListener(p,l)}}};var vn={type:1,name:"onIntersect",keyReq:2,onLoad:({el:e,rawKey:t,mods:n,genRX:r})=>{let{dm:i,deps:a,rxFn:o}=r(),s=()=>_(o,i,a);s=de(s,n),s=K(s,n);let l={threshold:0};n.has("full")?l.threshold=1:n.has("half")&&(l.threshold=.5);let c=new IntersectionObserver(u=>{for(let p of u)p.isIntersecting&&(s(),n.has("once")&&(c.disconnect(),delete e.dataset[t]))},l);return c.observe(e),()=>c.disconnect()}};var En={type:1,name:"onInterval",keyReq:2,valReq:1,onLoad:({mods:e,genRX:t})=>{let{dm:n,deps:r,rxFn:i}=t(),a=()=>_(i,n,r);a=K(a,e);let o=1e3,s=e.get("duration");s&&(o=ee(s),re(s,"leading",!1)&&a());let l=setInterval(a,o);return()=>{clearInterval(l)}}};var Tn={type:1,name:"onLoad",keyReq:2,valReq:1,onLoad:({mods:e,genRX:t})=>{let{dm:n,deps:r,rxFn:i}=t(),a=()=>_(i,n,r);a=K(a,e);let o=0,s=e.get("delay");s&&(o=ee(s)),a=at(a,o),a()}};function lt(e,t){return t=t.replaceAll(".","\\.").replaceAll("**",ie).replaceAll("*","[^\\.]*").replaceAll(ie,".*"),new RegExp(`^${t}$`).test(e)}function Oe(e){let t=[],n=e.split(/\s+/).filter(r=>r!=="");n=n.map(r=>Z(r));for(let r of n)for(let i of se())lt(i,r)&&t.push(i);return t}var An={type:1,name:"onSignalChange",valReq:1,argNames:["evt"],onLoad:({key:e,mods:t,genRX:n})=>{let{dm:r,deps:i,rxFn:a}=n(),o=l=>_(a,r,i,l);o=de(o,t),o=K(o,t);let s=l=>{if(e!==""){let c=C(e,t),{added:u,removed:p,updated:d}=l.detail;if(![...u,...p,...d].some(h=>lt(h,c)))return}o(l)};return document.addEventListener(X,s),()=>{document.removeEventListener(X,s)}}};var xn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:e,key:t,mods:n,value:r,batch:i})=>{let a=t?C(t,n):Z(r);i(()=>{$(a,e)})}};var wn="none",Rn="display",Mn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:e},genRX:t,computed:n,effect:r})=>{let{deps:i,rxFn:a}=t(),o=n(i,a);return r([o],async s=>{s?e.display===wn&&e.removeProperty(Rn):e.setProperty(Rn,wn)})}};var Dn={type:1,name:"text",keyReq:2,valReq:1,onLoad:e=>{let{el:t,genRX:n,computed:r,effect:i}=e,{deps:a,rxFn:o}=n();t instanceof HTMLElement||T("TextInvalidElement",e);let s=r(a,o);return i([s],l=>{t.textContent=`${l}`})}};var Pn={type:3,name:"setAll",fn:({batch:e},t,n)=>{e(()=>{let r=Oe(t);for(let i of r)$(i,n)})}};var Cn={type:3,name:"toggleAll",fn:({batch:e},t)=>{e(()=>{let n=Oe(t);for(let r of n)$(r,!ae(r))})}};ke(_t,Ut,Kt,jt,Gt,an,un,pn,fn,Bt,dn,gn,bn,yn,hn,Sn,vn,En,Tn,An,xn,Mn,Dn,Pn,Cn);nt();export{nt as apply,ke as load,It as setAlias};
//# sourceMappingURL=datastar.js.map
