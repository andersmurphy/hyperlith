// Datastar v1.0.0-RC.1
var ut=/ðŸ–•JS_DSðŸš€/.source,Te=ut.slice(0,5),re=ut.slice(4),L="datastar",pt="Datastar-Request",ft=1e3,dt="type module",mt=!1,gt=!1,yt=!0,Oe="morph",bt="inner",ht="outer",vt="prepend",St="append",Et="before",Tt="after",At="upsertAttributes",xt=Oe,He="datastar-merge-fragments",$e="datastar-merge-signals",qe="datastar-remove-fragments",We="datastar-remove-signals",Ge="datastar-execute-script";var g=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(g||{});var X=`${L}-signal-change`;var de=new Set,xe=new Set,we=new Set;function Me(e){de.clear(),xe.clear(),we.clear();let t=e();return(de.size||xe.size||we.size)&&document.dispatchEvent(new CustomEvent(X,{detail:{added:[...de],removed:[...xe],updated:[...we]}})),t}var O=new Array,K=new Map;function oe(){return O}function Be(e){return K.get(e)}function kn(e){let t=new Array,n=0,r=O.length-1,i=a=>a!==e&&!a.startsWith(`${e}.`);for(;n<=r;){let a=Math.floor((n+r)/2),o=O[a];if(o<e)n=a+1;else if(o>e)r=a-1;else{let s=a;do{let c=O[s];if(i(c))break;s--}while(s>=0);let l=a;do{let c=O[l];if(i(c))break;l++}while(l<O.length);for(let c=s+1;c<l;c++)t.push(O[c]);return t}}return t}function wt(e,t){t.path=e,ze(e),O.push(e),K.set(e,t),O.sort(),de.add(e)}function W(e,t){let n=K.get(e);if(n){if(!(n instanceof ie))return;n.value=t}else me(e,t)}function se(e){return K.get(e)?.value}function ae(e,t){let n=!1,r=K.get(e);return r||(n=!0,r=me(e,t)),{dep:r,inserted:n}}function Re(e,t=!1){let n=Mt(e);for(let[r,i]of Object.entries(n))K.has(r)&&t||W(r,i)}function ze(...e){for(let t of e){let n=kn(t);for(let r of n){K.delete(r);let i=O.indexOf(r);i>-1&&O.splice(i,1),xe?.add(r)}}}function De(e=!0,t=!1){return JSON.stringify(Ln(t),null,e?2:0)}function Ln(e,...t){let n=new Map;for(let i of O)if(!(e&&i.match(/^_|\._/))){if(t.length>0){let a=!1;for(let o of t)if(i.startsWith(o)){a=!0;break}if(!a)continue}n.set(i,K.get(i)?.value)}return In(n)}function Nn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mt(e,t=[],n="."){return Object.keys(e).reduce((r,i)=>Object.assign({},r,Nn(e[i])?Mt(e[i],t.concat([i]),n):{[t.concat([i]).join(n)]:e[i]}),{})}function In(e,t="."){let n={};for(let[r,i]of e.entries()){let a=r.split(t),o=n;for(let s=0;s<a.length-1;s++){let l=a[s];o[l]||(o[l]={}),o=o[l]}o[a[a.length-1]]=i}return n}function Xe(e,t,n,...r){return Me(()=>e(...r,...n.map((i,a)=>t[a]?i:i.value)))}function _e(e){e.flags&=-249;let t=e.currentValue,n=e.getter();return t!==n?(e.currentValue=n,!0):!1}function je(e){let t=e.flags;return(t&32||t&64&&Vn(e,t))&&(e.flags&=-249,e.run()),!0}var Ae=[];function me(e,t){let n=new ie(e,t);return O.push(e),K.set(e,n),O.sort(),de.add(e),n}var ie=class{constructor(t,n){this.path=t;this.currentValue=n}get value(){return this.currentValue}set value(t){if(this.currentValue!==t){this.currentValue=t,we.add(this.path);let n=this.subs;if(n){let r=n.nextSub,i,a=0,o=32;e:do{let s=n.sub,l=s.flags,c=!1;if(l&244?l&16&&!(l&4)?(s.flags=l&-17|o|8,c=!0):!(l&224)&&Ke(n,s)&&(s.flags=l|16|o|8,c=!!s.subs):(s.flags=l|o|8,c=!0),c){let u=s.subs;if(u){n=u,u.nextSub?(i={target:r,linked:i},++a,r=n.nextSub,o=64):o=l&2?128:64;continue}l&2&&(je(s)||(s.flags&=-9))}else l&(4|o)?!(l&o)&&l&224&&Ke(n,s)&&(s.flags=l|o):(s.flags=l|o|8,(l&10)===2&&(je(s)||(s.flags&=-9)));if(n=r){r=n.nextSub,o=a?64:32;continue}for(;a--;)if(n=i.target,i=i.linked,n){r=n.nextSub,o=a?64:32;continue e}break}while(!0)}}}};function Rt(e,t){switch(e.length){case 0:return t;case 1:return()=>t(e[0].value);case 2:return()=>t(e[0].value,e[1].value);case 3:return()=>t(e[0].value,e[1].value,e[2].value);case 4:return()=>t(e[0].value,e[1].value,e[2].value,e[3].value)}let n=e.length;return Ae[n]||(Ae[n]=Array(n)),()=>{for(let r=0;r<n;r++)Ae[n][r]=e[r].value;return t(...Ae[n])}}function Je(e,t){let n={path:"",flags:33,getter:Rt(e,t),get value(){let r=n.flags;if(r&96)if(r&32||Pt(n.deps)){if(_e(n)){let i=n.subs;i&&Ue(i)}}else n.flags=r&-65;return n.currentValue}};for(let r of e)Dt(r,n);return n}function Ye(e,t){let n={run:Rt(e,t),flags:2};for(let r of e)Dt(r,n);return n.run(),()=>{if(n.depsTail=void 0,n.flags&=-249,n.flags|=4,n.deps){let r=n.deps;do{let i=r.dep,a=r.nextDep,o=r.nextSub,s=r.prevSub;if(o?o.prevSub=s:i.subsTail=s,s?s.nextSub=o:i.subs=o,i.subs&&"deps"in i){let l=i.flags;l&32||(i.flags=l|32);let c=i.deps;if(c){r=c,i.depsTail.nextDep=a,i.deps=void 0,i.depsTail=void 0;continue}}r=a}while(r);n.deps=void 0}n.flags&=-5}}function Dt(e,t){let n=t.depsTail;if(n&&n.dep===e)return;let r=n?n.nextDep:t.deps;if(r&&r.dep===e){t.depsTail=r;return}let i=e.subsTail;if(i&&i.sub===t&&Ke(i,t))return;let a={dep:e,sub:t,nextDep:r,prevSub:void 0,nextSub:void 0};if(n===void 0?t.deps=a:n.nextDep=a,e.subs===void 0)e.subs=a;else{let o=e.subsTail;a.prevSub=o,o.nextSub=a}return t.depsTail=a,e.subsTail=a,a}function Vn(e,t){return Pt(e.deps)?(e.flags=t|32,!0):(e.flags=t&-65,!1)}function Pt(e){let t,n=0,r;e:do{r=!1;let i=e.dep;if("flags"in i){let a=i.flags;if((a&33)===33){if(_e(i)){let o=i.subs;o.nextSub&&Ue(o),r=!0}}else if((a&65)===65){(e.nextSub||e.prevSub)&&(t={target:e,linked:t}),e=i.deps,++n;continue}}if(!r&&e.nextDep){e=e.nextDep;continue}for(;n;){--n;let a=e.sub,o=a.subs;if(r){if(_e(a)){o.nextSub?(e=t.target,t=t.linked,Ue(o)):e=o;continue}}else a.flags&=-65;if(o.nextSub?(e=t.target,t=t.linked):e=o,e.nextDep){e=e.nextDep;continue e}r=!1}return r}while(!0)}function Ue(e){do{let t=e.sub,n=t.flags;(n&96)===64&&(t.flags=n|32|8,(n&10)===2&&(je(t)||(t.flags&=-9))),e=e.nextSub}while(e)}function Ke(e,t){let n=t.depsTail;if(n){let r=t.deps;do{if(r===e)return!0;if(r===n)break;r=r.nextDep}while(r)}return!1}var J=e=>e.trim()==="true",B=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),ge=e=>B(e).replace(/-./g,t=>t[1].toUpperCase()),ye=e=>B(e).replace(/-/g,"_"),On=e=>ge(e).replace(/^./,t=>t[0].toUpperCase()),Ct=e=>new Function(`return Object.assign({}, ${e})`)(),Y=e=>e.startsWith("$")?e.slice(1):e,Hn={kebab:B,snake:ye,pascal:On};function C(e,t){for(let n of t.get("case")||[]){let r=Hn[n];r&&(e=r(e))}return e}var $n="computed",Ft={type:1,name:$n,keyReq:1,valReq:1,onLoad:({key:e,mods:t,genRX:n,computed:r,batch:i})=>{e=C(e,t);let{deps:a,rxFn:o}=n(),s=r(a,o);i(()=>{wt(e,s)})}};var kt={type:1,name:"signals",onLoad:e=>{let{key:t,mods:n,value:r,genRX:i,evalRX:a,batch:o}=e,s=n.has("ifmissing"),{deps:l,dm:c,rxFn:u}=i();if(t!==""){let p=C(t,n),f=r===""?r:a(u,c,l);o(()=>{s?ae(p,f):W(p,f)})}else{let p=a(u,c,l);o(()=>{Re(p,s)})}}};var Lt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var le=class{#e=0;#t;constructor(t=L){this.#t=t}with(t){if(typeof t=="string")for(let n of t.split(""))this.with(n.charCodeAt(0));else typeof t=="boolean"?this.with(1<<(t?7:3)):this.#e=this.#e*33^t;return this}get value(){return this.#e}get string(){return this.#t+Math.abs(this.#e).toString(36)}};function Pe(e){if(e.id)return e.id;let t=new le;for(let[r,i]of Object.entries(e.dataset))t.with(r).with(i||"");let n=e;for(;n;){if(t.with(n.tagName||""),n.id){t.with(n.id);break}let r=n?.parentNode;r&&t.with([...r.children].indexOf(n)),n=r}return t.string}function be(e,t){return new le().with(e).with(t).value}function ce(e,t){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let n=e.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||t(e);let r=e.firstElementChild;for(;r;)ce(r,t),r=r.nextElementSibling}var qn="https://data-star.dev/errors";function Nt(e,t,n={}){let r=new Error;r.name=`${L} ${e} error`;let i=ye(t),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${qn}/${e}/${i}?${a}
Context: ${o}`,r}function H(e,t,n={}){let r={plugin:{name:t.plugin.name,type:g[t.plugin.type]}};return Nt("init",e,Object.assign(r,n))}function T(e,t,n={}){let r={plugin:{name:t.plugin.name,type:g[t.plugin.type]},element:{id:t.el.id,tag:t.el.tagName},expression:{rawKey:t.rawKey,key:t.key,value:t.value,validSignals:oe(),fnContent:t.fnContent}};return Nt("runtime",e,Object.assign(r,n))}var he={},Ze=[],te=new Map,Qe=null,et="";function It(e){et=e}function Ce(...e){for(let t of e){let n={plugin:t,actions:he,removals:te,applyToElement:Fe,batch:Me,signal:me,computed:Je,effect:Ye,evalRX:Xe},r;switch(t.type){case 3:{he[t.name]=t;break}case 1:{let i=t;Ze.push(i),r=i.onGlobalInit;break}case 2:{r=t.onGlobalInit;break}default:throw H("InvalidPluginType",n)}r&&r(n)}Ze.sort((t,n)=>{let r=n.name.length-t.name.length;return r!==0?r:t.name.localeCompare(n.name)})}function tt(){queueMicrotask(()=>{Fe(document.documentElement),Wn()})}function Fe(e){ce(e,t=>{let n=new Array,r=te.get(t.id)||new Map,i=new Map([...r]),a=new Map;for(let[o,s]of Object.entries(t.dataset)){if(!o.startsWith(et))break;let l=be(o,s||"");a.set(o,l),r.has(l)?i.delete(l):n.push(o)}for(let[o,s]of i)s();for(let o of n){let s=a.get(o);Gn(t,o,s)}})}function Wn(){Qe||(Qe=new MutationObserver(e=>{let t=new Set,n=new Set;for(let{target:r,type:i,addedNodes:a,removedNodes:o}of e)switch(i){case"childList":{for(let s of o)t.add(s);for(let s of a)n.add(s)}break;case"attributes":{n.add(r);break}}for(let r of t)ce(r,i=>{let a=te.get(i.id);if(a){for(let[o,s]of a)s();te.delete(i.id)}});for(let r of n)Fe(r)}),Qe.observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}))}function Gn(e,t,n){let r=ge(t.slice(et.length)),i=Ze.find(M=>new RegExp(`^${M.name}([A-Z]|_|$)`).test(r));if(!i)return;e.id.length||(e.id=Pe(e));let[a,...o]=r.slice(i.name.length).split(/\_\_+/),s=a.length>0;s&&(a=ge(a));let l=e.dataset[t]||"",c=l.length>0,u={applyToElement:Fe,actions:he,removals:te,genRX:()=>_n(u,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:a,value:l,mods:new Map,batch:Me,signal:me,computed:Je,effect:Ye,evalRX:Xe},p=i.keyReq||0;if(s){if(p===2)throw T(`${i.name}KeyNotAllowed`,u)}else if(p===1)throw T(`${i.name}KeyRequired`,u);let f=i.valReq||0;if(c){if(f===2)throw T(`${i.name}ValueNotAllowed`,u)}else if(f===1)throw T(`${i.name}ValueRequired`,u);if(p===3||f===3){if(s&&c)throw T(`${i.name}KeyAndValueProvided`,u);if(!s&&!c)throw T(`${i.name}KeyOrValueRequired`,u)}for(let M of o){let[y,...h]=M.split(".");u.mods.set(ge(y),new Set(h.map(v=>v.toLowerCase())))}let m=i.onLoad(u)??(()=>{}),b=te.get(e.id);b||(b=new Map,te.set(e.id,b)),b.set(n,m)}function _n(e,...t){let n=[],r=new Set,i="",a=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=e.value.trim().match(a);if(o){let y=o.length-1,h=o[y].trim();h.startsWith("return")||(o[y]=`return (${h});`),i=o.join(`;
`)}let s=new Map,l=new RegExp(`(?:${Te})(.*?)(?:${re})`,"gm");for(let y of i.matchAll(l)){let h=y[1],v=new le("dsEscaped").with(h).string;s.set(v,h),i=i.replace(Te+h+re,v)}let c=(y,h)=>`${y}${ye(h).replaceAll(/\./g,"_")}`,u=new Set(t),p=oe();if(p.length){let y=new RegExp(`\\$(${p.join("|")})(\\s*[+&^\\/*|-]?=[^=]|\\+\\+|--)`,"gm"),h=[...i.matchAll(y)],v=(A,x,d="")=>{i=i.replaceAll(`$${A[1]}`,x+d)};if(h.length){let A=`${L}Mut_`,x=new Set;for(let d of h){let D=d[1],S=Be(D),w=c(A,D);S&&!x.has(S)&&(r.add(S),x.add(S),n.push(!0),u.add(w)),v(d,`${w}`,".value")}}let F=new RegExp(`\\$(${p.join("|")})(\\W|$)`,"gm"),I=[...i.matchAll(F)];if(I.length){let A=`${L}Pure_`,x=new Set;for(let d of I){let D=d[1],S=Be(D),w=c(A,D);S&&!x.has(S)&&(r.add(S),x.add(S),n.push(!1),u.add(w)),v(d,w)}}}let f=new Set,m=new RegExp(`@(${Object.keys(he).join("|")})\\(`,"gm"),b=[...i.matchAll(m)],M=new Set;if(b.length){let y=`${L}Act_`;for(let h of b){let v=h[1],F=he[v];if(!F)continue;f.add(v);let I=c(y,v);u.add(I),i=i.replace(`@${v}(`,`${I}(`),M.add((...A)=>F.fn(e,...A))}}for(let[y,h]of s)i=i.replace(y,h);e.fnContent=i;try{let y=new Function("el",...u,i);return{dm:n,deps:[...r],rxFn:(...h)=>{try{return y(e.el,...h,...M)}catch(v){throw T("ExecuteExpression",e,{error:v.message})}}}}catch(y){throw T("GenerateExpression",e,{error:y.message})}}Ce(Lt,kt,Ft);var Q=`${L}-sse`,ke="started",Le="finished",Vt="error",Ot="retrying",Ht="retrying";function _(e,t){document.addEventListener(Q,n=>{if(n.detail.type!==e)return;let{argsRaw:r}=n.detail;t(r)})}function ue(e,t,n){document.dispatchEvent(new CustomEvent(Q,{detail:{type:e,elId:t,argsRaw:n}}))}var $t=e=>`${e}`.includes("text/event-stream"),j=async(e,t,n,r)=>{let{el:i}=e,a=i.id,{headers:o,contentType:s,includeLocal:l,selector:c,openWhenHidden:u,retryInterval:p,retryScaler:f,retryMaxWaitMs:m,retryMaxCount:b,abort:M}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:ft,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),y=t.toLowerCase(),h=()=>{};try{if(!n?.length)throw T("SseNoUrlProvided",e,{action:y});let v={};v[pt]=!0,s==="json"&&(v["Content-Type"]="application/json");let F=Object.assign({},v,o),I={method:t,headers:F,openWhenHidden:u,retryInterval:p,retryScaler:f,retryMaxWaitMs:m,retryMaxCount:b,signal:M,onopen:async d=>{if(d.status>=400){let D=d.status.toString();ue(Vt,a,{status:D})}},onmessage:d=>{if(!d.event.startsWith(L))return;let D=d.event,S={},w=d.data.split(`
`);for(let E of w){let V=E.indexOf(" "),q=E.slice(0,V),R=S[q];R||(R=[],S[q]=R);let k=E.slice(V+1);R.push(k)}let P={};for(let[E,V]of Object.entries(S))P[E]=V.join(`
`);ue(D,a,P)},onerror:d=>{if($t(d))throw T("InvalidContentType",e,{url:n});d&&(console.error(d.message),ue(Ot,a,{message:d.message}))}},A=new URL(n,window.location.origin),x=new URLSearchParams(A.search);if(s==="json"){let d=De(!1,!l);t==="GET"?x.set(L,d):I.body=d}else if(s==="form"){let d=c?document.querySelector(c):i.closest("form");if(d===null)throw c?T("SseFormNotFound",e,{action:y,selector:c}):T("SseClosestFormNotFound",e,{action:y});if(i!==d){let S=w=>w.preventDefault();d.addEventListener("submit",S),h=()=>d.removeEventListener("submit",S)}if(!d.checkValidity()){d.reportValidity(),h();return}let D=new FormData(d);if(t==="GET"){let S=new URLSearchParams(D);for(let[w,P]of S)x.append(w,P)}else I.body=D}else throw T("SseInvalidContentType",e,{action:y,contentType:s});ue(ke,a,{}),A.search=x.toString();try{await Xn(A.toString(),a,I)}catch(d){if(!$t(d))throw T("SseFetchFailed",e,{method:t,url:n,error:d})}}finally{ue(Le,a,{}),h()}};async function jn(e,t){let n=e.getReader(),r;for(r=await n.read();!r.done;)t(r.value),r=await n.read()}function Un(e){let t,n,r,i=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=Bn(t,o);let s=t.length,l=0;for(;n<s;){i&&(t[n]===10&&(l=++n),i=!1);let c=-1;for(;n<s&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:i=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===s?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function Kn(e,t,n){let r=qt(),i=new TextDecoder;return function(o,s){if(o.length===0)n?.(r),r=qt();else if(s>0){let l=i.decode(o.subarray(0,s)),c=s+(o[s+1]===32?2:1),u=i.decode(o.subarray(c));switch(l){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let p=Number.parseInt(u,10);Number.isNaN(p)||t(r.retry=p);break}}}}}function Bn(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function qt(){return{data:"",event:"",id:"",retry:void 0}}var zn="text/event-stream",Wt="last-event-id";function Xn(e,t,{signal:n,headers:r,onopen:i,onmessage:a,onclose:o,onerror:s,openWhenHidden:l,fetch:c,retryInterval:u=1e3,retryScaler:p=2,retryMaxWaitMs:f=3e4,retryMaxCount:m=10,...b}){return new Promise((M,y)=>{let h=0,v={...r};v.accept||(v.accept=zn);let F;function I(){F.abort(),document.hidden||S()}l||document.addEventListener("visibilitychange",I);let A=0;function x(){document.removeEventListener("visibilitychange",I),window.clearTimeout(A),F.abort()}n?.addEventListener("abort",()=>{x(),M()});let d=c??window.fetch,D=i??function(){};async function S(){F=new AbortController;try{let w=await d(e,{...b,headers:v,signal:F.signal});await D(w),await jn(w.body,Un(Kn(P=>{P?v[Wt]=P:delete v[Wt]},P=>{u=P},a))),o?.(),x(),M()}catch(w){if(!F.signal.aborted)try{let P=s?.(w)??u;window.clearTimeout(A),A=window.setTimeout(S,P),u*=p,u=Math.min(u,f),h++,h>=m?(ue(Ht,t,{}),x(),y("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${P}ms.`)}catch(P){x(),y(P)}}}S()})}var Gt={type:3,name:"delete",fn:async(e,t,n)=>j(e,"DELETE",t,{...n})};var _t={type:3,name:"get",fn:async(e,t,n)=>j(e,"GET",t,{...n})};var jt={type:3,name:"patch",fn:async(e,t,n)=>j(e,"PATCH",t,{...n})};var Ut={type:3,name:"post",fn:async(e,t,n)=>j(e,"POST",t,{...n})};var Kt={type:3,name:"put",fn:async(e,t,n)=>j(e,"PUT",t,{...n})};var Bt={type:2,name:Ge,onGlobalInit:async e=>{_(Ge,({autoRemove:t=`${yt}`,attributes:n=dt,script:r})=>{let i=J(t);if(!r?.length)throw H("NoScriptProvided",e);let a=document.createElement("script");for(let o of n.split(`
`)){let s=o.indexOf(" "),l=s?o.slice(0,s):o,c=s?o.slice(s):"";a.setAttribute(l.trim(),c.trim())}a.text=r,document.head.appendChild(a),i&&a.remove()})}};var ve=document,Se=!!ve.startViewTransition;function U(e,t){if(t.has("viewtransition")&&Se){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e}var rn="div",nt="value",ot=e=>document.createElement(e),on=()=>ot(rn),Jn=e=>`<${e}></${e}>`,zt=e=>[...e.querySelectorAll("[id]")],sn=e=>e instanceof Element,Xt=e=>e instanceof HTMLTemplateElement,Jt=e=>e instanceof HTMLInputElement,Yt=e=>e instanceof HTMLTextAreaElement,Qt=e=>e instanceof HTMLOptionElement,an={type:2,name:He,onGlobalInit:async e=>{let t=ot("template");_(He,({fragments:n=Jn(rn),selector:r="",mergeMode:i=xt,useViewTransition:a="false"})=>{let o=J(a);t.innerHTML=n.trim();let s=[...t.content.children];for(let l of s){if(!sn(l))throw H("NoFragmentsFound",e);let c=r||`#${l.getAttribute("id")}`,u=[...document.querySelectorAll(c)||[]];if(!u.length)throw H("NoTargetsFound",e,{selectorOrID:c});o&&Se?ve.startViewTransition(()=>Zt(e,i,l,u)):Zt(e,i,l,u)}})}};function Zt(e,t,n,r){for(let i of r){i.dataset.fragmentMergeTarget="true";let a=n.cloneNode(!0);switch(t){case Oe:{ce(a,o=>{!o.id?.length&&Object.keys(o.dataset).length&&(o.id=Pe(o));let s=e.removals.get(o.id);if(s){for(let[l,c]of Object.entries(o.dataset))if(l.startsWith("bind")){let u=be(l,c||""),p=s.get(u);if(p){s.delete(u);let f=be(u,u);s.set(f,p)}}}}),Yn(i,a);break}case bt:i.innerHTML=a.outerHTML;break;case ht:i.replaceWith(a);break;case vt:i.prepend(a);break;case St:i.append(a);break;case Et:i.before(a);break;case Tt:i.after(a);break;case At:for(let o of a.getAttributeNames()){let s=a.getAttribute(o);i.setAttribute(o,s)}break;default:throw H("InvalidMergeMode",e,{mergeMode:t})}}}var Ee=on();Ee.hidden=!0;var Ne,$=new Map,pe=new Set;function Yn(e,t){e instanceof Document&&(e=e.documentElement);let n,r=on();if(t instanceof Node)r.append(t),n=r;else{for(let m of[...t])r.append(m);n=r}let i=zt(n),a=zt(e);e.id&&a.push(e);let o=new Set,s=new Map;for(let{id:m,tagName:b}of a)s.has(m)?o.add(m):s.set(m,b);pe.clear();for(let{id:m,tagName:b}of i)pe.has(m)?o.add(m):s.get(m)===b&&pe.add(m);for(let m of o)pe.delete(m);$.clear(),nn(e.parentElement,a),nn(n,i),document.body.insertAdjacentElement("afterend",Ee),Ne=e;let l=e.parentNode,c=e.previousSibling,u=e.nextSibling;ln(l,n,e,u);let p=new Array,f=c?.nextSibling||l.firstChild;for(;f&&f!==u;)p.push(f),f=f.nextSibling;return Ee.remove(),p}function ln(e,t,n=null,r=null){Xt(e)&&Xt(t)&&(e=e.content,t=t.content),n??=e.firstChild;for(let i of t.childNodes){if(n&&n!==r){let o=Qn(i,n,r);if(o){if(o!==n){let s=n;for(;s&&s!==o;){let l=s;s=s.nextSibling,tn(l)}}rt(o,i),n=o.nextSibling;continue}}if(sn(i)&&pe.has(i.id)){let o=i.id,s=`[id="${o}"]`,l=p=>p.querySelector(s),c=Ne.id===o&&Ne||l(Ne)||l(Ee),u=c;for(;u=u.parentNode;){let p=$.get(u);p&&(p.delete(c.id),p.size||$.delete(u))}cn(e,c,n),rt(c,i),n=c.nextSibling;continue}if($.has(i)){let o=ot(i.tagName);return e.insertBefore(o,n),rt(o,i),o}let a=document.importNode(i,!0);e.insertBefore(a,n)}for(;n&&n!==r;){let i=n;n=n.nextSibling,tn(i)}}function Qn(e,t,n){let r=null,i=e.nextSibling,a=0,o=0,s=$.get(e)?.size||0,l=t;for(;l&&l!==n;){if(en(l,e)){let c=!1,u=$.get(l),p=$.get(e);if(p&&u){for(let f of u)if(p.has(f)){c=!0;break}}if(c)return l;if(!r&&!$.has(l)){if(!s)return l;r=l}}if(o+=$.get(l)?.size||0,o>s||(r===null&&i&&en(l,i)&&(a++,i=i.nextSibling,a>=2&&(r=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return r||null}function en(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.id||n.id===r.id)}function tn(e){$.has(e)?cn(Ee,e,null):e.parentNode?.removeChild(e)}function cn(e,t,n=null){try{e.moveBefore(t,n)}catch{e.insertBefore(t,n)}}function rt(e,t){let n=t.nodeType,r=e,i=t;if(n===1){let a=r.attributes,o=i.attributes;for(let s of o)r.getAttribute(s.name)!==s.value&&r.setAttribute(s.name,s.value);for(let s=a.length-1;0<=s;s--){let l=a[s];l&&(i.hasAttribute(l.name)||r.removeAttribute(l.name))}if(Jt(r)&&Jt(i)&&i.type!=="file"){let s=i.value,l=r.value;it(r,i,"checked"),it(r,i,"disabled"),i.hasAttribute(nt)?l!==s&&(r.setAttribute(nt,s),r.value=s):(r.value="",r.removeAttribute(nt))}else if(Qt(r)&&Qt(i))it(r,i,"selected");else if(Yt(r)&&Yt(i)){let s=i.value,l=r.value;s!==l&&(r.value=s),r.firstChild&&r.firstChild.nodeValue!==s&&(r.firstChild.nodeValue=s)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),r.innerHTML!==i.innerHTML&&ln(r,i),e}function it(e,t,n){let r=t,i=e,a=r[n],o=i[n];a!==o&&(i[n]=r[n],a?e.setAttribute(n,""):e.removeAttribute(n))}function nn(e,t){for(let n of t)if(pe.has(n.id)){let r=n;for(;r&&r!==e;){let i=$.get(r);i||(i=new Set,$.set(r,i)),i.add(n.id),r=r.parentElement}}}var un={type:2,name:$e,onGlobalInit:async({batch:e})=>{_($e,({signals:t="{}",onlyIfMissing:n=`${gt}`})=>{let r=J(n),i=Ct(t);e(()=>Re(i,r))})}};var pn={type:2,name:qe,onGlobalInit:async e=>{_(qe,({selector:t,useViewTransition:n=`${mt}`})=>{if(!t.length)throw H("NoSelectorProvided",e);let r=J(n),i=document.querySelectorAll(t),a=()=>{for(let o of i)o.remove()};r&&Se?ve.startViewTransition(()=>a()):a()})}};var fn={type:2,name:We,onGlobalInit:async e=>{let{batch:t}=e;_(We,({paths:n=""})=>{let r=n.split(`
`).map(i=>i.trim());if(!r?.length)throw H("NoPathsProvided",e);t(()=>{ze(...r)})})}};var dn={type:1,name:"attr",valReq:1,onLoad:({el:e,key:t,genRX:n,computed:r,effect:i})=>{let{deps:a,rxFn:o}=n();if(t===""){let l=r(a,o);return i([l],async c=>{for(let[u,p]of Object.entries(c))p===!1?e.removeAttribute(u):e.setAttribute(u,p)})}t=B(t);let s=r(a,o);return i([s],async l=>{let c;typeof l=="string"?c=l:c=JSON.stringify(l),!c||c==="false"||c==="null"||c==="undefined"?e.removeAttribute(t):e.setAttribute(t,c)})}};var Zn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,mn=["change","input","keydown"],gn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,effect:a,batch:o}=e,s=t,l=n?C(n,r):Y(i),c=t.tagName.toLowerCase(),u=c.includes("input"),p=c.includes("select"),f=t.getAttribute("type"),m=t.hasAttribute("value"),b="",M=u&&f==="checkbox";M&&(b=m?"":!1);let y=u&&f==="number";y&&(b=0);let h=u&&f==="radio";h&&(t.getAttribute("name")?.length||t.setAttribute("name",l));let v=u&&f==="file",{dep:F,inserted:I}=o(()=>ae(l,b)),A=-1;Array.isArray(F.value)&&(t.getAttribute("name")===null&&t.setAttribute("name",l),A=[...document.querySelectorAll(`[name="${l}"]`)].findIndex(E=>E===e.el));let x=A>=0,d=()=>[...se(l)],D=()=>{let E=se(l);x&&!p&&(E=E[A]||b);let V=`${E}`;if(M||h)typeof E=="boolean"?s.checked=E:s.checked=V===s.value;else if(p){let q=t;if(q.multiple){if(!x)throw T("BindSelectMultiple",e);for(let R of q.options){if(R?.disabled)continue;let k=y?Number(R.value):R.value;R.selected=E.includes(k)}}else q.value=V}else v||("value"in t?t.value=V:t.setAttribute("value",V))},S=async()=>{let E=se(l);if(x){let k=E;for(;A>=k.length;)k.push(b);E=k[A]||b}let V=(k,z)=>{let G=z;x&&!p&&!v&&(G=d(),G[A]=z),W(k,G)};if(v){let k=[...s?.files||[]],z=[],G=[],lt=[];await Promise.all(k.map(ct=>new Promise(Fn=>{let ee=new FileReader;ee.onload=()=>{if(typeof ee.result!="string")throw T("InvalidFileResultType",e,{resultType:typeof ee.result});let Ve=ee.result.match(Zn);if(!Ve?.groups)throw T("InvalidDataUri",e,{result:ee.result});z.push(Ve.groups.contents),G.push(Ve.groups.mime),lt.push(ct.name)},ee.onloadend=()=>Fn(void 0),ee.readAsDataURL(ct)}))),o(()=>{V(l,z),V(`${l}Mimes`,G),V(`${l}Names`,lt)});return}let q=s.value||"",R;if(M){let k=s.checked||s.getAttribute("checked")==="true";m?R=k?q:"":R=k}else if(p){let z=[...t.selectedOptions];x?R=z.filter(G=>G.selected).map(G=>G.value):R=z[0]?.value||b}else typeof E=="boolean"?R=!!q:typeof E=="number"?R=Number(q):R=q||"";o(()=>{V(l,R)})};I&&S();for(let E of mn)t.addEventListener(E,S);let w=E=>{E.persisted&&S()};window.addEventListener("pageshow",w);let P=a([F],()=>D());return()=>{P();for(let E of mn)t.removeEventListener(E,S);window.removeEventListener("pageshow",w)}}};var yn={type:1,name:"class",valReq:1,onLoad:({el:e,key:t,mods:n,genRX:r,computed:i,effect:a})=>{let o=e.classList,{deps:s,rxFn:l}=r(),c=i(s,l);return a([c],u=>{if(t===""){let p=u;for(let[f,m]of Object.entries(p)){let b=f.split(/\s+/);m?o.add(...b):o.remove(...b)}}else{let p=B(t);p=C(p,n),u?o.add(p):o.remove(p)}})}};var bn={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,batch:a}=e,o=n?C(n,r):Y(i),{dep:s}=a(()=>ae(o,!1));if(!(s instanceof ie))throw T("not_signal",e,{signalName:o});let l=c=>{let{type:u,elId:p}=c.detail;if(p===t.id)switch(u){case ke:s.value=!0;break;case Le:s.value=!1;break}};return document.addEventListener(Q,l),()=>{s.value=!1,document.removeEventListener(Q,l)}}};var hn={type:1,name:"jsonSignals",keyReq:2,valReq:2,onLoad:e=>{let{el:t}=e;t instanceof HTMLElement||T("JsonSignalsInvalidElement",e);let n=()=>{t.textContent=De(!0)};return n(),document.addEventListener(X,n),()=>{document.removeEventListener(X,n)}}};function Z(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return Number(t.replace("ms",""));if(t.endsWith("s"))return Number(t.replace("s",""))*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function ne(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function st(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function er(e,t,n=!1,r=!0){let i=-1,a=()=>i&&clearTimeout(i);return(...o)=>{a(),n&&!i&&e(...o),i=setTimeout(()=>{r&&e(...o),a()},t)}}function tr(e,t,n=!0,r=!1){let i=!1;return(...a)=>{i||(n&&e(...a),i=!0,setTimeout(()=>{i=!1,r&&e(...a)},t))}}function fe(e,t){let n=t.get("delay");if(n){let a=Z(n);e=st(e,a)}let r=t.get("debounce");if(r){let a=Z(r),o=ne(r,"leading",!1),s=!ne(r,"notrail",!1);e=er(e,a,o,s)}let i=t.get("throttle");if(i){let a=Z(i),o=!ne(i,"noleading",!1),s=ne(i,"trail",!1);e=tr(e,a,o,s)}return e}var vn={type:1,name:"on",keyReq:1,valReq:1,argNames:["evt"],onLoad:({el:e,key:t,mods:n,genRX:r,evalRX:i})=>{let a=e;n.has("window")&&(a=window);let{dm:o,deps:s,rxFn:l}=r(),c=m=>{m&&((n.has("prevent")||t==="submit")&&m.preventDefault(),n.has("stop")&&m.stopPropagation()),i(l,o,s,m)};c=fe(c,n),c=U(c,n);let u={capture:!1,passive:!1,once:!1};if(n.has("capture")&&(u.capture=!0),n.has("passive")&&(u.passive=!0),n.has("once")&&(u.once=!0),n.has("outside")){a=document;let m=c;c=M=>{let y=M?.target;e.contains(y)||m(M)}}let f=B(t);return f=C(f,n),f===Q&&(a=document),a.addEventListener(f,c,u),()=>{a.removeEventListener(f,c)}}};var Sn={type:1,name:"onIntersect",keyReq:2,onLoad:({el:e,rawKey:t,mods:n,genRX:r,evalRX:i})=>{let{dm:a,deps:o,rxFn:s}=r(),l=()=>i(s,a,o);l=fe(l,n),l=U(l,n);let c={threshold:0};n.has("full")?c.threshold=1:n.has("half")&&(c.threshold=.5);let u=new IntersectionObserver(p=>{for(let f of p)f.isIntersecting&&(l(),n.has("once")&&(u.disconnect(),delete e.dataset[t]))},c);return u.observe(e),()=>u.disconnect()}};var En={type:1,name:"onInterval",keyReq:2,valReq:1,onLoad:({mods:e,genRX:t,evalRX:n})=>{let{dm:r,deps:i,rxFn:a}=t(),o=()=>n(a,r,i);o=U(o,e);let s=1e3,l=e.get("duration");l&&(s=Z(l),ne(l,"leading",!1)&&o());let c=setInterval(o,s);return()=>{clearInterval(c)}}};var Tn={type:1,name:"onLoad",keyReq:2,valReq:1,onLoad:({mods:e,genRX:t,evalRX:n})=>{let{dm:r,deps:i,rxFn:a}=t(),o=()=>n(a,r,i);o=U(o,e);let s=0,l=e.get("delay");l&&(s=Z(l)),o=st(o,s),o()}};function at(e,t){return t=t.replaceAll(".","\\.").replaceAll("**",re).replaceAll("*","[^\\.]*").replaceAll(re,".*"),new RegExp(`^${t}$`).test(e)}function Ie(e){let t=[],n=e.split(/\s+/).filter(r=>r!=="");n=n.map(r=>Y(r));for(let r of n)for(let i of oe())at(i,r)&&t.push(i);return t}var An={type:1,name:"onSignalChange",valReq:1,argNames:["evt"],onLoad:({key:e,mods:t,genRX:n,evalRX:r})=>{let{dm:i,deps:a,rxFn:o}=n(),s=c=>r(o,i,a,c);s=fe(s,t),s=U(s,t);let l=c=>{if(e!==""){let u=C(e,t),{added:p,removed:f,updated:m}=c.detail;if(![...p,...f,...m].some(b=>at(b,u)))return}s(c)};return document.addEventListener(X,l),()=>{document.removeEventListener(X,l)}}};var xn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:e,key:t,mods:n,value:r,batch:i})=>{let a=t?C(t,n):Y(r);i(()=>{W(a,e)})}};var wn="none",Mn="display",Rn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:e},genRX:t,computed:n,effect:r})=>{let{deps:i,rxFn:a}=t(),o=n(i,a);return r([o],async s=>{s?e.display===wn&&e.removeProperty(Mn):e.setProperty(Mn,wn)})}};var Dn={type:1,name:"text",keyReq:2,valReq:1,onLoad:e=>{let{el:t,genRX:n,computed:r,effect:i}=e,{deps:a,rxFn:o}=n();t instanceof HTMLElement||T("TextInvalidElement",e);let s=r(a,o);return i([s],l=>{t.textContent=`${l}`})}};var Pn={type:3,name:"setAll",fn:({batch:e},t,n)=>{e(()=>{let r=Ie(t);for(let i of r)W(i,n)})}};var Cn={type:3,name:"toggleAll",fn:({batch:e},t)=>{e(()=>{let n=Ie(t);for(let r of n)W(r,!se(r))})}};Ce(_t,Ut,Kt,jt,Gt,an,un,pn,fn,Bt,dn,gn,yn,bn,hn,vn,Sn,En,Tn,An,xn,Rn,Dn,Pn,Cn);tt();export{tt as apply,Ce as load,It as setAlias};
//# sourceMappingURL=datastar.js.map
