// Datastar v1.0.0-RC.3
var pt=/ðŸ–•JS_DSðŸš€/.source,ve=pt.slice(0,5),ne=pt.slice(4),I="datastar",ft="Datastar-Request",dt=1e3,mt="type module",gt=!1,yt=!1,bt=!0,Oe="morph",ht="inner",St="outer",vt="prepend",Et="append",Tt="before",At="after",xt="upsertAttributes",wt=Oe,He="datastar-merge-fragments",$e="datastar-merge-signals",We="datastar-remove-fragments",qe="datastar-remove-signals",Ge="datastar-execute-script";var m=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(m||{});var z=`${I}-signal-change`;var X=e=>e.trim()==="true",B=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),fe=e=>B(e).replace(/-./g,t=>t[1].toUpperCase()),de=e=>B(e).replace(/-/g,"_"),In=e=>fe(e).replace(/^./,t=>t[0].toUpperCase()),Mt=e=>new Function(`return Object.assign({}, ${e})`)(),J=e=>e.startsWith("$")?e.slice(1):e,On={kebab:B,snake:de,pascal:In};function L(e,t){for(let n of t.get("case")||[]){let r=On[n];r&&(e=r(e))}return e}var Hn="computed",Rt={type:1,name:Hn,keyReq:1,valReq:1,onLoad:({key:e,mods:t,genRX:n,computed:r,batch:i})=>{e=L(e,t);let{deps:s,rxFn:o}=n();i(()=>{r(s,o,e)})}};var Ae=new Set,xe=new Set,we=new Set;function Me(e){Ae.clear(),xe.clear(),we.clear();let t=e();return(Ae.size||xe.size||we.size)&&document.dispatchEvent(new CustomEvent(z,{detail:{added:[...Ae],removed:[...xe],updated:[...we]}})),t}var O=[],Y=new Map;function ie(){return O}function ze(e){return Y.get(e)}function $n(e){let t=[],n=0,r=O.length-1,i=s=>s!==e&&!s.startsWith(`${e}.`);for(;n<=r;){let s=Math.floor((n+r)/2),o=O[s];if(o<e)n=s+1;else if(o>e)r=s-1;else{let a=s;do{let c=O[a];if(i(c))break;a--}while(a>=0);let l=s;do{let c=O[l];if(i(c))break;l++}while(l<O.length);for(let c=a+1;c<l;c++)t.push(O[c]);return t}}return t}function Dt(e,t){Xe(e),O.push(e),Y.set(e,t),O.sort(),Ae.add(e)}function q(e,t){let n=Y.get(e);if(n){if(!(n instanceof re))return;n.value=t}else ye(t,e)}function oe(e){return Y.get(e)?.value}function se(e,t){let n=!1,r=Y.get(e);return r||(n=!0,r=ye(t,e)),{dep:r,inserted:n}}function Re(e,t=!1){let n=Pt(e);for(let[r,i]of Object.entries(n))Y.has(r)&&t||q(r,i)}function Xe(...e){for(let t of e){let n=$n(t);for(let r of n){Y.delete(r);let i=O.indexOf(r);i>-1&&O.splice(i,1),xe?.add(r)}}}function De(e=!0,t=!1){return JSON.stringify(Wn(t),null,e?2:0)}function Wn(e,...t){let n=new Map;for(let i of O)if(!(e&&i.match(/^_|\._/))){if(t.length>0){let s=!1;for(let o of t)if(i.startsWith(o)){s=!0;break}if(!s)continue}n.set(i,Y.get(i)?.value)}return Gn(n)}function qn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Pt(e,t=[],n="."){return Object.keys(e).reduce((r,i)=>Object.assign({},r,qn(e[i])?Pt(e[i],t.concat([i]),n):{[t.concat([i]).join(n)]:e[i]}),{})}function Gn(e,t="."){let n={};for(let[r,i]of e.entries()){let s=r.split(t),o=n;for(let a=0;a<s.length-1;a++){let l=s[a];o[l]||(o[l]={}),o=o[l]}o[s[s.length-1]]=i}return n}function Ct(e,t,n,...r){return Me(()=>e(...r,...n.map((i,s)=>t[s]?i:i.value)))}var Ee=[],me=[],Te=0,ge=0;function Je(e,t){switch(e.length){case 0:return t;case 1:return()=>t(e[0].value);case 2:return()=>t(e[0].value,e[1].value);case 3:return()=>t(e[0].value,e[1].value,e[2].value);case 4:return()=>t(e[0].value,e[1].value,e[2].value,e[3].value)}let n=e.length;return Ee[n]||(Ee[n]=Array(n)),()=>{for(let r=0;r<n;r++)Ee[n][r]=e[r].value;return t(...Ee[n])}}function _e(e){e.flags&=-249;let t=e.currentValue,n=e.getter();return t!==n?(e.currentValue=n,!0):!1}function _n(e){let t=e.flags;return(t&32||t&64&&jn(e,t))&&(e.flags&=-249,e.run()),!0}function jn(e,t){return kt(e.deps)?(e.flags=t|32,!0):(e.flags=t&-65,!1)}function ye(e,t){return new re(e,t)}var re=class{constructor(t,n){this.currentValue=t;this.path=n;n&&Dt(n,this)}get value(){return this.currentValue}set value(t){if(this.currentValue!==t&&(this.currentValue=t,this.path&&we.add(this.path),this.subs)){let n=this.subs,r=n.nextSub,i,s=0,o=32;e:do{let a=n.sub,l=a.flags,c=!1;if(l&244?l&16&&!(l&4)?(a.flags=l&-17|o|8,c=!0):!(l&224)&&Ke(n,a)&&(a.flags=l|16|o|8,c=!!a.subs):(a.flags=l|o|8,c=!0),c){let u=a.subs;if(u){n=u,u.nextSub?(i={target:r,linked:i},++s,r=n.nextSub,o=64):o=l&2?128:64;continue}l&2&&(me[ge++]=a)}else l&(4|o)?!(l&o)&&l&224&&Ke(n,a)&&(a.flags=l|o):(a.flags=l|o|8,(l&10)===2&&(me[ge++]=a));if(n=r){r=n.nextSub,o=s?64:32;continue}for(;s--;)if(n=i.target,i=i.linked,n){r=n.nextSub,o=s?64:32;continue e}break}while(!0);for(;Te<ge;){let a=me[Te];me[Te++]=void 0,_n(a)||(a.flags&=-9)}Te=0,ge=0}}};function Ye(e,t,n){return new je(e,Je(e,t),n)}var je=class{constructor(t,n,r){this.path=r;this.flags=33;this.getter=Je(t,n),r&&Dt(r,this);for(let i of t)Lt(i,this)}get value(){let t=this.flags;if(t&96)if(t&32||kt(this.deps)){if(_e(this)){let n=this.subs;n&&Be(n)}}else this.flags=t&-65;return this.currentValue}};function Qe(e,t){let n=new Ue(e,t);return()=>n.dispose()}var Ue=class{constructor(t,n){this.flags=2;for(let r of t)Lt(r,this);this.run=Je(t,n),this.run()}dispose(){if(this.depsTail=void 0,this.flags&=-249,this.deps){let t=this.deps;do{let n=t.dep,r=t.nextDep,i=t.nextSub,s=t.prevSub;if(i?i.prevSub=s:n.subsTail=s,s?s.nextSub=i:n.subs=i,!n.subs&&"deps"in n){let o=n.flags;o&32||(n.flags=o|32);let a=n.deps;if(a){t=a,n.depsTail.nextDep=r,n.deps=void 0,n.depsTail=void 0;continue}}t=r}while(t);this.deps=void 0}}};function Lt(e,t){let n=t.depsTail;if(n&&n.dep===e)return;let r=n?n.nextDep:t.deps;if(r&&r.dep===e){t.depsTail=r;return}let i=e.subsTail;if(i&&i.sub===t&&Ke(i,t))return;let s={dep:e,sub:t,nextDep:r,prevSub:void 0,nextSub:void 0};if(n?n.nextDep=s:t.deps=s,!e.subs)e.subs=s;else{let o=e.subsTail;s.prevSub=o,o.nextSub=s}return t.depsTail=s,e.subsTail=s,s}function kt(e){let t,n=0,r;e:do{r=!1;let i=e.dep;if(e.sub.flags&32)r=!0;else if("flags"in i){let s=i.flags;if((s&33)===33){if(_e(i)){let o=i.subs;o.nextSub&&Be(o),r=!0}}else if((s&65)===65){(e.nextSub||e.prevSub)&&(t={target:e,linked:t}),e=i.deps,++n;continue}}if(!r&&e.nextDep){e=e.nextDep;continue}for(;n;){--n;let s=e.sub,o=s.subs;if(r){if(_e(s)){o.nextSub?(e=t.target,t=t.linked,Be(o)):e=o;continue}}else s.flags&=-65;if(o.nextSub?(e=t.target,t=t.linked):e=o,e.nextDep){e=e.nextDep;continue e}r=!1}return r}while(!0)}function Be(e){do{let t=e.sub,n=t.flags;(n&96)===64&&(t.flags=n|32|8,(n&10)===2&&(me[ge++]=t)),e=e.nextSub}while(e)}function Ke(e,t){let n=t.depsTail;if(n){let r=t.deps;do{if(r===e)return!0;if(r===n)break;r=r.nextDep}while(r)}return!1}var Ft={type:1,name:"signals",onLoad:e=>{let{el:t,key:n,mods:r,value:i,genRX:s,evalRX:o,batch:a}=e,{deps:l,dm:c,rxFn:u}=s(),p=r.has("ifmissing");if(t.removeAttribute(`data-signals${n&&`-${n}`}`),n!==""){let f=L(n,r),g=i===""?i:o(u,c,l);a(()=>{p?se(f,g):q(f,g)})}else{let f=o(u,c,l);a(()=>{Re(f,p)})}}};var Nt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};function Un(e){return e instanceof HTMLElement||e instanceof SVGElement}function Pe(e,t){let n=document.createTreeWalker(e,1);for(;e;){if(Un(e)){let r=e.dataset;if("starIgnore"in r){e=n.nextSibling();continue}"starIgnore__self"in r||t(e)}e=n.nextNode()}}var Bn="https://data-star.dev/errors";function Vt(e,t,n={}){let r=new Error;r.name=`${I} ${e} error`;let i=de(t),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${Bn}/${e}/${i}?${s}
Context: ${o}`,r}function H(e,t,n={}){let r={plugin:{name:t.plugin.name,type:m[t.plugin.type]}};return Vt("init",e,Object.assign(r,n))}function E(e,t,n={}){let r={plugin:{name:t.plugin.name,type:m[t.plugin.type]},element:{id:t.el.id,tag:t.el.tagName},expression:{rawKey:t.rawKey,key:t.key,value:t.value,validSignals:ie(),fnContent:t.fnContent}};return Vt("runtime",e,Object.assign(r,n))}var be={},Ze=[],ae=new Map,et=null,tt="";function Ot(e){tt=e}function Ce(...e){for(let t of e){let n={plugin:t,actions:be,removals:ae,applyToElement:Le,batch:Me,signal:ye,computed:Ye,effect:Qe},r=t.type;if(r===3)be[t.name]=t;else if(r===1)Ze.push(t),t.onGlobalInit?.(n);else if(r===2)t.onGlobalInit?.(n);else throw H("InvalidPluginType",n)}Ze.sort((t,n)=>{let r=n.name.length-t.name.length;return r!==0?r:t.name.localeCompare(n.name)})}function nt(){queueMicrotask(()=>{Pe(document.documentElement,Le),et=new MutationObserver(It),It([])})}function It(e){et.disconnect();for(let{target:t,type:n,addedNodes:r,removedNodes:i}of e)switch(n){case"childList":{for(let s of i)Pe(s,o=>{let a=ae.get(o);if(ae.delete(o)){for(let l of a.values())l();a.clear()}});for(let s of r)Pe(s,o=>{o.setAttribute("data-apply","")})}break;case"attributes":{t.setAttribute("data-apply","");break}}for(let t of document.querySelectorAll("[data-apply]"))t.removeAttribute("data-apply"),Le(t);et.observe(document.body,{subtree:!0,childList:!0,attributes:!0})}function Ht(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}function Le(e){let t=[],n=ae.get(e)||new Map,r=new Map(n);for(let[i,s]of Object.entries(e.dataset)){if(!i.startsWith(tt))continue;let o=Ht(`${i}${s}`);r.delete(o)||t.push({key:i,value:s,hash:o})}for(let[i,s]of r)s(),n.delete(i);for(let{key:i,value:s,hash:o}of t){let a=Kn(e,i,s);a&&n.set(o,a)}n.size&&ae.set(e,n)}function Kn(e,t,n){let r=fe(t.slice(tt.length)),i=Ze.find(f=>new RegExp(`^${f.name}([A-Z]|_|$)`).test(r));if(!i)return;let[s,...o]=r.slice(i.name.length).split(/\_\_+/),a=!!s;a&&(s=fe(s));let l=!!n,c={applyToElement:Le,actions:be,removals:ae,genRX:()=>zn(c,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:s,value:n,mods:new Map,batch:Me,signal:ye,computed:Ye,effect:Qe,evalRX:Ct},u=i.keyReq||0;if(a){if(u===2)throw E(`${i.name}KeyNotAllowed`,c)}else if(u===1)throw E(`${i.name}KeyRequired`,c);let p=i.valReq||0;if(l){if(p===2)throw E(`${i.name}ValueNotAllowed`,c)}else if(p===1)throw E(`${i.name}ValueRequired`,c);if(u===3||p===3){if(a&&l)throw E(`${i.name}KeyAndValueProvided`,c);if(!a&&!l)throw E(`${i.name}KeyOrValueRequired`,c)}for(let f of o){let[g,...T]=f.split(".");c.mods.set(fe(g),new Set(T.map(D=>D.toLowerCase())))}return i.onLoad(c)}function zn(e,...t){let n=[],r=new Set,i="",s=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=e.value.trim().match(s);if(o){let b=o.length-1,h=o[b].trim();h.startsWith("return")||(o[b]=`return (${h});`),i=o.join(`;
`)}let a=new Map,l=new RegExp(`(?:${ve})(.*?)(?:${ne})`,"gm");for(let b of i.matchAll(l)){let h=b[1],S=`dsEscaped${Ht(h)}`;a.set(S,h),i=i.replace(ve+h+ne,S)}let c=(b,h)=>`${b}${de(h).replaceAll(/\./g,"_")}`,u=new Set(t),p=ie();if(p.length){let b=new RegExp(`\\$(${p.join("|")})(\\s*[+&^\\/*|-]?=[^=]|\\+\\+|--)`,"gm"),h=[...i.matchAll(b)],S=(A,x,d="")=>{i=i.replaceAll(`$${A[1]}`,x+d)};if(h.length){let A=`${I}Mut_`,x=new Set;for(let d of h){let C=d[1],v=ze(C),M=c(A,C);v&&!x.has(v)&&(r.add(v),x.add(v),n.push(!0),u.add(M)),S(d,`${M}`,".value")}}let P=new RegExp(`\\$(${p.join("|")})(\\W|$)`,"gm"),k=[...i.matchAll(P)];if(k.length){let A=`${I}Pure_`,x=new Set;for(let d of k){let C=d[1],v=ze(C),M=c(A,C);v&&!x.has(v)&&(r.add(v),x.add(v),n.push(!1),u.add(M)),S(d,M)}}}let f=new Set,g=new RegExp(`@(${Object.keys(be).join("|")})\\(`,"gm"),T=[...i.matchAll(g)],D=new Set;if(T.length){let b=`${I}Act_`;for(let h of T){let S=h[1],P=be[S];if(!P)continue;f.add(S);let k=c(b,S);u.add(k),i=i.replace(`@${S}(`,`${k}(`),D.add((...A)=>P.fn(e,...A))}}for(let[b,h]of a)i=i.replace(b,h);e.fnContent=i;try{let b=new Function("el",...u,i);return{dm:n,deps:[...r],rxFn:(...h)=>{try{return b(e.el,...h,...D)}catch(S){throw E("ExecuteExpression",e,{error:S.message})}}}}catch(b){throw E("GenerateExpression",e,{error:b.message})}}Ce(Nt,Ft,Rt);var Q=`${I}-sse`,ke="started",Fe="finished",$t="error",Wt="retrying",qt="retrying";function _(e,t){document.addEventListener(Q,n=>{if(n.detail.type!==e)return;let{argsRaw:r}=n.detail;t(r)})}function le(e,t,n){document.dispatchEvent(new CustomEvent(Q,{detail:{type:e,el:t,argsRaw:n}}))}var Gt=e=>`${e}`.includes("text/event-stream"),_t=e=>e==="GET",j=async(e,t,n,r)=>{let{el:i}=e,{headers:s,contentType:o,includeLocal:a,excludeSignals:l,selector:c,openWhenHidden:u,retryInterval:p,retryScaler:f,retryMaxWaitMs:g,retryMaxCount:T,abort:D}=Object.assign({headers:{},contentType:"json",includeLocal:!1,excludeSignals:!1,selector:null,openWhenHidden:!1,retryInterval:dt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),b=t.toLowerCase(),h=()=>{};try{if(!n?.length)throw E("SseNoUrlProvided",e,{action:b});let S={};S[ft]=!0,o==="json"&&(S["Content-Type"]="application/json");let P=Object.assign({},S,s),k={method:t,headers:P,openWhenHidden:u,retryInterval:p,retryScaler:f,retryMaxWaitMs:g,retryMaxCount:T,signal:D,onopen:async d=>{if(d.status>=400){let C=d.status.toString();le($t,i,{status:C})}},onmessage:d=>{if(!d.event.startsWith(I))return;let C=d.event,v={},M=d.data.split(`
`);for(let y of M){let V=y.indexOf(" "),W=y.slice(0,V),R=v[W];R||(R=[],v[W]=R);let F=y.slice(V+1);R.push(F)}let w={};for(let[y,V]of Object.entries(v))w[y]=V.join(`
`);le(C,i,w)},onerror:d=>{if(Gt(d))throw E("InvalidContentType",e,{url:n});d&&(console.error(d.message),le(Wt,i,{message:d.message}))}},A=new URL(n,window.location.href),x=new URLSearchParams(A.search);if(o==="json"){if(!l){let d=De(!1,!a);_t(t)?x.set(I,d):k.body=d}}else if(o==="form"){let d=c?document.querySelector(c):i.closest("form");if(d===null)throw c?E("SseFormNotFound",e,{action:b,selector:c}):E("SseClosestFormNotFound",e,{action:b});if(i!==d){let w=y=>y.preventDefault();d.addEventListener("submit",w),h=()=>d.removeEventListener("submit",w)}if(!d.checkValidity()){d.reportValidity(),h();return}let C=d.getAttribute("enctype")==="multipart/form-data";C||(P["Content-Type"]="application/x-www-form-urlencoded");let v=new FormData(d);if(i instanceof HTMLButtonElement){let w=i.getAttribute("name");w&&v.append(w,i.value)}let M=new URLSearchParams(v);if(_t(t))for(let[w,y]of M)x.append(w,y);else C?k.body=v:k.body=M}else throw E("SseInvalidContentType",e,{action:b,contentType:o});le(ke,i,{}),A.search=x.toString();try{await er(A.toString(),i,k)}catch(d){if(!Gt(d))throw E("SseFetchFailed",e,{method:t,url:n,error:d})}}finally{le(Fe,i,{}),h()}};async function Xn(e,t){let n=e.getReader(),r;for(r=await n.read();!r.done;)t(r.value),r=await n.read()}function Jn(e){let t,n,r,i=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=Qn(t,o);let a=t.length,l=0;for(;n<a;){i&&(t[n]===10&&(l=++n),i=!1);let c=-1;for(;n<a&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:i=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===a?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function Yn(e,t,n){let r=jt(),i=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=jt();else if(a>0){let l=i.decode(o.subarray(0,a)),c=a+(o[a+1]===32?2:1),u=i.decode(o.subarray(c));switch(l){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let p=Number.parseInt(u,10);Number.isNaN(p)||t(r.retry=p);break}}}}}function Qn(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function jt(){return{data:"",event:"",id:"",retry:void 0}}var Zn="text/event-stream",Ut="last-event-id";function er(e,t,{signal:n,headers:r,onopen:i,onmessage:s,onclose:o,onerror:a,openWhenHidden:l,fetch:c,retryInterval:u=1e3,retryScaler:p=2,retryMaxWaitMs:f=3e4,retryMaxCount:g=10,...T}){return new Promise((D,b)=>{let h=0,S={...r};S.accept||(S.accept=Zn);let P;function k(){P.abort(),document.hidden||v()}l||document.addEventListener("visibilitychange",k);let A=0;function x(){document.removeEventListener("visibilitychange",k),window.clearTimeout(A),P.abort()}n?.addEventListener("abort",()=>{x(),D()});let d=c??window.fetch,C=i??function(){};async function v(){P=new AbortController;try{let M=await d(e,{...T,headers:S,signal:P.signal});await C(M),await Xn(M.body,Jn(Yn(w=>{w?S[Ut]=w:delete S[Ut]},w=>{u=w},s))),o?.(),x(),D()}catch(M){if(!P.signal.aborted)try{let w=a?.(M)??u;window.clearTimeout(A),A=window.setTimeout(v,w),u*=p,u=Math.min(u,f),h++,h>=g?(le(qt,t,{}),x(),b("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${w}ms.`)}catch(w){x(),b(w)}}}v()})}var Bt={type:3,name:"delete",fn:async(e,t,n)=>j(e,"DELETE",t,{...n})};var Kt={type:3,name:"get",fn:async(e,t,n)=>j(e,"GET",t,{...n})};var zt={type:3,name:"patch",fn:async(e,t,n)=>j(e,"PATCH",t,{...n})};var Xt={type:3,name:"post",fn:async(e,t,n)=>j(e,"POST",t,{...n})};var Jt={type:3,name:"put",fn:async(e,t,n)=>j(e,"PUT",t,{...n})};var Yt={type:2,name:Ge,onGlobalInit:async e=>{_(Ge,({autoRemove:t=`${bt}`,attributes:n=mt,script:r})=>{let i=X(t);if(!r?.length)throw H("NoScriptProvided",e);let s=document.createElement("script");for(let o of n.split(`
`)){let a=o.indexOf(" "),l=a?o.slice(0,a):o,c=a?o.slice(a):"";s.setAttribute(l.trim(),c.trim())}s.text=r,document.head.appendChild(s),i&&s.remove()})}};var he=document,Se=!!he.startViewTransition;function U(e,t){if(t.has("viewtransition")&&Se){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e}var ln="div",rt="value",st=e=>document.createElement(e),cn=()=>st(ln),tr=e=>`<${e}></${e}>`,Qt=e=>[...e.querySelectorAll("[id]")],un=e=>e instanceof Element,Zt=e=>e instanceof HTMLTemplateElement,en=e=>e instanceof HTMLInputElement,tn=e=>e instanceof HTMLTextAreaElement,nn=e=>e instanceof HTMLOptionElement,pn={type:2,name:He,onGlobalInit:async e=>{let t=st("template");_(He,({fragments:n=tr(ln),selector:r="",mergeMode:i=wt,useViewTransition:s="false"})=>{let o=X(s);t.innerHTML=n.trim();for(let a of[...t.content.children]){if(!un(a))throw H("NoFragmentsFound",e);let l=r||`#${a.getAttribute("id")}`,c=document.querySelectorAll(l);if(!c.length)throw H("NoTargetsFound",e,{selectorOrID:l});o&&Se?he.startViewTransition(()=>rn(e,i,a,c)):rn(e,i,a,c)}})}};function rn(e,t,n,r){for(let i of r){let s=n.cloneNode(!0);switch(t){case Oe:{rr(i,s);break}case ht:i.innerHTML=s.outerHTML;break;case St:i.replaceWith(s);break;case vt:i.prepend(s);break;case Et:i.append(s);break;case Tt:i.before(s);break;case At:i.after(s);break;case xt:for(let o of s.getAttributeNames()){let a=s.getAttribute(o);i.setAttribute(o,a)}break;default:throw H("InvalidMergeMode",e,{mergeMode:t})}}}var ue=cn();ue.hidden=!0;var Ne,$=new Map,ce=new Set,nr=ue.moveBefore!==void 0;function rr(e,t){let n=cn();n.append(t);let r=Qt(n),i=Qt(e);e.id&&i.push(e);let s=new Set,o=new Map;for(let{id:f,tagName:g}of i)o.has(f)?s.add(f):o.set(f,g);ce.clear();for(let{id:f,tagName:g}of r)ce.has(f)?s.add(f):o.get(f)===g&&ce.add(f);for(let f of s)ce.delete(f);$.clear(),an(e.parentElement,i),an(n,r),document.body.insertAdjacentElement("afterend",ue),Ne=e;let a=e.parentNode,l=e.previousSibling,c=e.nextSibling;fn(a,n,e,c);let u=[],p=l?.nextSibling||a.firstChild;for(;p&&p!==c;)u.push(p),p=p.nextSibling;return ue.remove(),u}function fn(e,t,n=null,r=null){Zt(e)&&Zt(t)&&(e=e.content,t=t.content),n??=e.firstChild;for(let i of t.childNodes){if(n&&n!==r){let o=ir(i,n,r);if(o){if(o!==n){let a=n;for(;a&&a!==o;){let l=a;a=a.nextSibling,sn(l)}}it(o,i),n=o.nextSibling;continue}}if(un(i)&&ce.has(i.id)){let o=i.id,a=`[id="${o}"]`,l=p=>p.querySelector(a),c=Ne.id===o&&Ne||l(Ne)||l(ue),u=c;for(;u=u.parentNode;){let p=$.get(u);p&&(p.delete(c.id),p.size||$.delete(u))}dn(e,c,n),it(c,i),n=c.nextSibling;continue}if($.has(i)){let o=st(i.tagName);return e.insertBefore(o,n),it(o,i),o}let s=document.importNode(i,!0);e.insertBefore(s,n)}for(;n&&n!==r;){let i=n;n=n.nextSibling,sn(i)}}function ir(e,t,n){let r=null,i=e.nextSibling,s=0,o=0,a=$.get(e)?.size||0,l=t;for(;l&&l!==n;){if(on(l,e)){let c=!1,u=$.get(l),p=$.get(e);if(p&&u){for(let f of u)if(p.has(f)){c=!0;break}}if(c)return l;if(!r&&!$.has(l)){if(!a)return l;r=l}}if(o+=$.get(l)?.size||0,o>a||(r===null&&i&&on(l,i)&&(s++,i=i.nextSibling,s>=2&&(r=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return r||null}function on(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.id||n.id===r.id)}function sn(e){$.has(e)?dn(ue,e,null):e.parentNode?.removeChild(e)}function dn(e,t,n=null){nr?e.moveBefore(t,n):e.insertBefore(t,n)}function it(e,t){let n=t.nodeType,r=e,i=t;if(n===1){let s=r.attributes,o=i.attributes;for(let a of o)r.getAttribute(a.name)!==a.value&&r.setAttribute(a.name,a.value);for(let a=s.length-1;0<=a;a--){let l=s[a];l&&(i.hasAttribute(l.name)||r.removeAttribute(l.name))}if(en(r)&&en(i)&&i.type!=="file"){let a=i.value,l=r.value;ot(r,i,"checked"),ot(r,i,"disabled"),Object.keys(i.dataset||{}).some(u=>u.startsWith("bind"))||(i.hasAttribute(rt)?l!==a&&(r.setAttribute(rt,a),r.value=a):(r.value="",r.removeAttribute(rt)))}else if(nn(r)&&nn(i))ot(r,i,"selected");else if(tn(r)&&tn(i)){let a=i.value,l=r.value;a!==l&&(r.value=a),r.firstChild&&r.firstChild.nodeValue!==a&&(r.firstChild.nodeValue=a)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),r.innerHTML!==i.innerHTML&&fn(r,i),e}function ot(e,t,n){let r=t,i=e,s=r[n],o=i[n];s!==o&&(i[n]=r[n],s?e.setAttribute(n,""):e.removeAttribute(n))}function an(e,t){for(let n of t)if(ce.has(n.id)){let r=n;for(;r&&r!==e;){let i=$.get(r);i||(i=new Set,$.set(r,i)),i.add(n.id),r=r.parentElement}}}var mn={type:2,name:$e,onGlobalInit:async({batch:e})=>{_($e,({signals:t="{}",onlyIfMissing:n=`${yt}`})=>{let r=X(n),i=Mt(t);e(()=>Re(i,r))})}};var gn={type:2,name:We,onGlobalInit:async e=>{_(We,({selector:t,useViewTransition:n=`${gt}`})=>{if(!t.length)throw H("NoSelectorProvided",e);let r=X(n),i=document.querySelectorAll(t),s=()=>{for(let o of i)o.remove()};r&&Se?he.startViewTransition(()=>s()):s()})}};var yn={type:2,name:qe,onGlobalInit:async e=>{let{batch:t}=e;_(qe,({paths:n=""})=>{let r=n.split(`
`).map(i=>i.trim());if(!r?.length)throw H("NoPathsProvided",e);t(()=>{Xe(...r)})})}};var bn={type:1,name:"attr",valReq:1,onLoad:({el:e,key:t,genRX:n,computed:r,effect:i})=>{let{deps:s,rxFn:o}=n();if(t===""){let l=r(s,o);return i([l],async c=>{for(let[u,p]of Object.entries(c))p===!1?e.removeAttribute(u):e.setAttribute(u,p)})}t=B(t);let a=r(s,o);return i([a],async l=>{let c;typeof l=="string"?c=l:c=JSON.stringify(l),!c||c==="false"||c==="null"||c==="undefined"?e.removeAttribute(t):e.setAttribute(t,c)})}};var or=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,hn=["change","input","keydown"],Sn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,effect:s,batch:o}=e,a=t,l=n?L(n,r):J(i),c=t.tagName.toLowerCase(),u=c.includes("input"),p=c.includes("select"),f=t.getAttribute("type"),g=t.hasAttribute("value"),T="",D=u&&f==="checkbox";D&&(T=g?"":!1);let b=u&&f==="number";b&&(T=0);let h=u&&f==="radio";h&&(t.getAttribute("name")?.length||t.setAttribute("name",l));let S=u&&f==="file",{dep:P,inserted:k}=o(()=>se(l,T)),A=-1;Array.isArray(P.value)&&(t.getAttribute("name")===null&&t.setAttribute("name",l),A=[...document.querySelectorAll(`[name="${l}"]`)].findIndex(y=>y===e.el));let x=A>=0,d=()=>[...oe(l)],C=()=>{let y=oe(l);x&&!p&&(y=y[A]||T);let V=`${y}`;if(D||h)typeof y=="boolean"?a.checked=y:a.checked=V===a.value;else if(p){let W=t;if(W.multiple){if(!x)throw E("BindSelectMultiple",e);for(let R of W.options){if(R?.disabled)continue;let F=b?Number(R.value):R.value;R.selected=y.includes(F)}}else W.value=V}else S||("value"in t?t.value=V:t.setAttribute("value",V))},v=async()=>{let y=oe(l);if(x){let F=y;for(;A>=F.length;)F.push(T);y=F[A]||T}let V=(F,K)=>{let G=K;x&&!p&&!S&&(G=d(),G[A]=K),q(F,G)};if(S){let F=[...a?.files||[]],K=[],G=[],ct=[];await Promise.all(F.map(ut=>new Promise(Vn=>{let ee=new FileReader;ee.onload=()=>{if(typeof ee.result!="string")throw E("InvalidFileResultType",e,{resultType:typeof ee.result});let Ie=ee.result.match(or);if(!Ie?.groups)throw E("InvalidDataUri",e,{result:ee.result});K.push(Ie.groups.contents),G.push(Ie.groups.mime),ct.push(ut.name)},ee.onloadend=()=>Vn(void 0),ee.readAsDataURL(ut)}))),o(()=>{V(l,K),V(`${l}Mimes`,G),V(`${l}Names`,ct)});return}let W=a.value||"",R;if(D){let F=a.checked||a.getAttribute("checked")==="true";g?R=F?W:"":R=F}else if(p){let K=[...t.selectedOptions];x?R=K.filter(G=>G.selected).map(G=>G.value):R=K[0]?.value||T}else typeof y=="boolean"?R=!!W:typeof y=="number"?R=Number(W):R=W||"";o(()=>{V(l,R)})};k&&v();for(let y of hn)t.addEventListener(y,v);let M=y=>{y.persisted&&v()};window.addEventListener("pageshow",M);let w=s([P],()=>C());return()=>{w();for(let y of hn)t.removeEventListener(y,v);window.removeEventListener("pageshow",M)}}};var vn={type:1,name:"class",valReq:1,onLoad:({el:e,key:t,mods:n,genRX:r,computed:i,effect:s})=>{let o=e.classList,{deps:a,rxFn:l}=r(),c=i(a,l);return s([c],u=>{if(t===""){let p=u;for(let[f,g]of Object.entries(p)){let T=f.split(/\s+/);g?o.add(...T):o.remove(...T)}}else{let p=B(t);p=L(p,n),u?o.add(p):o.remove(p)}})}};var En={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:e=>{let{el:t,key:n,mods:r,value:i,batch:s}=e,o=n?L(n,r):J(i),{dep:a}=s(()=>se(o,!1));if(!(a instanceof re))throw E("not_signal",e,{signalName:o});let l=c=>{let{type:u,el:p}=c.detail;if(p===t)switch(u){case ke:a.value=!0;break;case Fe:a.value=!1;break}};return document.addEventListener(Q,l),()=>{a.value=!1,document.removeEventListener(Q,l)}}};var Tn={type:1,name:"jsonSignals",keyReq:2,valReq:2,onLoad:e=>{let{el:t}=e;t instanceof HTMLElement||E("JsonSignalsInvalidElement",e);let n=()=>{t.textContent=De(!0)};return n(),document.addEventListener(z,n),()=>{document.removeEventListener(z,n)}}};function Z(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return Number(t.replace("ms",""));if(t.endsWith("s"))return Number(t.replace("s",""))*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function te(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function at(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function sr(e,t,n=!1,r=!0){let i=-1,s=()=>i&&clearTimeout(i);return(...o)=>{s(),n&&!i&&e(...o),i=setTimeout(()=>{r&&e(...o),s()},t)}}function ar(e,t,n=!0,r=!1){let i=!1;return(...s)=>{i||(n&&e(...s),i=!0,setTimeout(()=>{i=!1,r&&e(...s)},t))}}function pe(e,t){let n=t.get("delay");if(n){let s=Z(n);e=at(e,s)}let r=t.get("debounce");if(r){let s=Z(r),o=te(r,"leading",!1),a=!te(r,"notrail",!1);e=sr(e,s,o,a)}let i=t.get("throttle");if(i){let s=Z(i),o=!te(i,"noleading",!1),a=te(i,"trail",!1);e=ar(e,s,o,a)}return e}var An={type:1,name:"on",keyReq:1,valReq:1,argNames:["evt"],onLoad:({el:e,key:t,mods:n,genRX:r,evalRX:i})=>{let s=e;n.has("window")&&(s=window);let{dm:o,deps:a,rxFn:l}=r(),c=g=>{g&&((n.has("prevent")||t==="submit")&&g.preventDefault(),n.has("stop")&&g.stopPropagation(),!(g.isTrusted||g instanceof CustomEvent||n.has("trust")))||i(l,o,a,g)};c=pe(c,n),c=U(c,n);let u={capture:!1,passive:!1,once:!1};if(n.has("capture")&&(u.capture=!0),n.has("passive")&&(u.passive=!0),n.has("once")&&(u.once=!0),n.has("outside")){s=document;let g=c;c=D=>{let b=D?.target;e.contains(b)||g(D)}}let f=B(t);return f=L(f,n),f===Q&&(s=document),s.addEventListener(f,c,u),()=>{s.removeEventListener(f,c)}}};var xn={type:1,name:"onIntersect",keyReq:2,onLoad:({el:e,rawKey:t,mods:n,genRX:r,evalRX:i})=>{let{dm:s,deps:o,rxFn:a}=r(),l=()=>i(a,s,o);l=pe(l,n),l=U(l,n);let c={threshold:0};n.has("full")?c.threshold=1:n.has("half")&&(c.threshold=.5);let u=new IntersectionObserver(p=>{for(let f of p)f.isIntersecting&&(l(),n.has("once")&&(u.disconnect(),delete e.dataset[t]))},c);return u.observe(e),()=>u.disconnect()}};var wn={type:1,name:"onInterval",keyReq:2,valReq:1,onLoad:({mods:e,genRX:t,evalRX:n})=>{let{dm:r,deps:i,rxFn:s}=t(),o=()=>n(s,r,i);o=U(o,e);let a=1e3,l=e.get("duration");l&&(a=Z(l),te(l,"leading",!1)&&o());let c=setInterval(o,a);return()=>{clearInterval(c)}}};var Mn={type:1,name:"onLoad",keyReq:2,valReq:1,onLoad:({el:e,mods:t,genRX:n,evalRX:r})=>{let{dm:i,deps:s,rxFn:o}=n(),a=()=>r(o,i,s);a=U(a,t),t.has("once")||e.removeAttribute("data-on-load");let l=0,c=t.get("delay");c&&(l=Z(c)),a=at(a,l),a()}};function lt(e,t){return t=t.replaceAll(".","\\.").replaceAll("**",ne).replaceAll("*","[^\\.]*").replaceAll(ne,".*"),new RegExp(`^${t}$`).test(e)}function Ve(e){let t=[],n=e.split(/\s+/).filter(r=>r!=="");n=n.map(r=>J(r));for(let r of n)for(let i of ie())lt(i,r)&&t.push(i);return t}var Rn={type:1,name:"onSignalChange",valReq:1,argNames:["evt"],onLoad:({key:e,mods:t,genRX:n,evalRX:r})=>{let{dm:i,deps:s,rxFn:o}=n(),a=c=>r(o,i,s,c);a=pe(a,t),a=U(a,t);let l=c=>{if(e!==""){let u=L(e,t),{added:p,removed:f,updated:g}=c.detail;if(![...p,...f,...g].some(T=>lt(T,u)))return}a(c)};return document.addEventListener(z,l),()=>{document.removeEventListener(z,l)}}};var Dn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:e,key:t,mods:n,value:r,batch:i})=>{let s=t?L(t,n):J(r);i(()=>{q(s,e)})}};var Pn="none",Cn="display",Ln={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:e},genRX:t,computed:n,effect:r})=>{let{deps:i,rxFn:s}=t(),o=n(i,s);return r([o],async a=>{a?e.display===Pn&&e.removeProperty(Cn):e.setProperty(Cn,Pn)})}};var kn={type:1,name:"text",keyReq:2,valReq:1,onLoad:e=>{let{el:t,genRX:n,computed:r,effect:i}=e,{deps:s,rxFn:o}=n();t instanceof HTMLElement||E("TextInvalidElement",e);let a=r(s,o);return i([a],l=>{t.textContent=`${l}`})}};var Fn={type:3,name:"setAll",fn:({batch:e},t,n)=>{e(()=>{let r=Ve(t);for(let i of r)q(i,n)})}};var Nn={type:3,name:"toggleAll",fn:({batch:e},t)=>{e(()=>{let n=Ve(t);for(let r of n)q(r,!oe(r))})}};Ce(Kt,Xt,Jt,zt,Bt,pn,mn,gn,yn,Yt,bn,Sn,vn,En,Tn,An,xn,wn,Mn,Rn,Dn,Ln,kn,Fn,Nn);nt();export{nt as apply,Ce as load,Ot as setAlias};
//# sourceMappingURL=datastar.js.map
