// Datastar v1.0.0-RC.12
var et=/ðŸ–•JS_DSðŸš€/.source,Ee=et.slice(0,5),Ne=et.slice(4),P="datastar",tt="Datastar-Request",nt=1e3;var it=!1,Ve="outer",rt="inner",qe="remove",ot="replace",st="prepend",at="append",ct="before",lt="after",ut=Ve,ae="datastar-patch-elements",ce="datastar-patch-signals";var X=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null);function ft(e){for(let t in e)if(Object.hasOwn(e,t))return!1;return!0}function le(e,t){for(let n in e){let i=e[n];X(i)||Array.isArray(i)?le(i,t):e[n]=t(i)}}var m=(e,t)=>{for(let n in t){let i=n.split("."),r=i.pop(),s=i.reduce((o,a)=>o[a]??={},e);s[r]=t[n]}return e};function Se(e){return e instanceof HTMLElement||e instanceof SVGElement}function Re(e){return e?.closest("[data-scope]")?.dataset.scope??null}var dt=e=>e.trim()==="true",M=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),ee=e=>M(e).replace(/-./g,t=>t[1].toUpperCase()),ue=e=>M(e).replace(/-/g,"_"),Tn=e=>ee(e).replace(/(^.|(?<=\.).)/g,t=>t[0].toUpperCase()),Te=e=>{try{return JSON.parse(e)}catch{return Function(`return (${e})`)()}},An={kebab:M,snake:ue,pascal:Tn};function L(e,t){for(let n of t.get("case")||[]){let i=An[n];i&&(e=i(e))}return e}function C(e,t,n){if(n.has("scoped")){let i=Re(t);i&&(e=`${i}.${e}`)}return e}var pt={type:"attribute",name:"computed",keyReq:"must",valReq:"must",isExpr:!0,onLoad:({el:e,key:t,mods:n,rx:i,computed:r,mergePatch:s})=>{let o=L(t,n);o=C(o,e,n),s(m({},{[o]:r(i)}))}};var mt={type:"attribute",name:"effect",keyReq:"denied",valReq:"must",onLoad:({effect:e,rx:t})=>e(t)};var gt={type:"attribute",name:"signals",isExpr:!0,onLoad:({el:e,key:t,mods:n,rx:i,mergePatch:r})=>{let s=n.has("ifmissing");if(t)t=C(L(t,n),e,n),r(m({},{[t]:i()}),{ifMissing:s});else{let o=i(),a={};for(let c in o)a[C(c,e,n)]=o[c];r(m({},a),{ifMissing:s})}}};var xn="https://data-star.dev/errors";function yt(e,t,n={}){let i=new Error;i.name=`${P} ${e} error`;let r=ue(t),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return i.message=`${t}
More info: ${xn}/${e}/${r}?${s}
Context: ${o}`,i}function U(e,t,n={}){let i={plugin:{name:t.plugin.name,type:t.plugin.type}};return yt("init",e,Object.assign(i,n))}function vt(e,t,n={}){let i={plugin:{name:e.plugin.name,type:e.plugin.type},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,fnContent:e.fnContent}};return yt("runtime",t,Object.assign(i,n))}var Ae=`${P}-signal-patch`;var xe={},Ge=[],ke=0,Me=0,We=0,_,me=()=>{ke++},ge=()=>{--ke||(Rt(),H())},te=e=>Ln.bind(0,{previousValue:e,t:e,e:1}),bt=Symbol("computed"),Et=e=>{let t=Mn.bind(0,{e:17,getter:e});return t[bt]=1,t},St=e=>{let t={d:e,e:2};_&&Be(t,_);let n=N(t);me();try{t.d()}finally{ge(),N(n)}return Mt.bind(0,t)},Ke=e=>{let t=N(void 0);try{return e()}finally{N(t)}},Rt=()=>{for(;Me<We;){let e=Ge[Me];Ge[Me++]=void 0,xt(e,e.e&=-65)}Me=0,We=0},ht=e=>"getter"in e?Tt(e):At(e,e.t),N=e=>{let t=_;return _=e,t},Tt=e=>{let t=N(e);Lt(e);try{let n=e.t;return n!==(e.t=e.getter(n))}finally{N(t),wt(e)}},At=(e,t)=>(e.e=1,e.previousValue!==(e.previousValue=t)),Ue=e=>{let t=e.e;if(!(t&64)){e.e=t|64;let n=e.o;n?Ue(n.s):Ge[We++]=e}},xt=(e,t)=>{if(t&16||t&32&&Ct(e.r,e)){let i=N(e);Lt(e),me();try{e.d()}finally{ge(),N(i),wt(e)}return}t&32&&(e.e=t&-33);let n=e.r;for(;n;){let i=n.c,r=i.e;r&64&&xt(i,i.e=r&-65),n=n.n}},Mn=e=>{let t=e.e;if(t&16||t&32&&Ct(e.r,e)){if(Tt(e)){let n=e.o;n&&Oe(n)}}else t&32&&(e.e=t&-33);return _&&Be(e,_),e.t},Ln=(e,...t)=>{if(t.length){let i=t[0];if(e.t!==(e.t=i)){e.e=17;let r=e.o;return r&&(wn(r),ke||Rt()),!0}return!1}let n=e.t;if(e.e&16&&At(e,n)){let i=e.o;i&&Oe(i)}return _&&Be(e,_),n},Mt=e=>{let t=e.r;for(;t;)t=Ce(t,e);let n=e.o;n&&Ce(n),e.e=0},Be=(e,t)=>{let n=t.a;if(n&&n.c===e)return;let i,r=t.e&4;if(r&&(i=n?n.n:t.r,i&&i.c===e)){t.a=i;return}let s=e.p;if(s&&s.s===t&&(!r||Ot(s,t)))return;let o=t.a=e.p={c:e,s:t,l:n,n:i,u:s};i&&(i.l=o),n?n.n=o:t.r=o,s?s.i=o:e.o=o},Ce=(e,t=e.s)=>{let n=e.c,i=e.l,r=e.n,s=e.i,o=e.u;if(r?r.l=i:t.a=i,i?i.n=r:t.r=r,s?s.u=o:n.p=o,o)o.i=s;else if(!(n.o=s))if("getter"in n){let a=n.r;if(a){n.e=17;do a=Ce(a,n);while(a)}}else"previousValue"in n||Mt(n);return r},wn=e=>{let t=e.i,n;e:for(;;){let i=e.s,r=i.e;if(r&3&&(r&60?r&12?r&4?!(r&48)&&Ot(e,i)?(i.e=r|40,r&=1):r=0:i.e=r&-9|32:r=0:i.e=r|32,r&2&&Ue(i),r&1)){let s=i.o;if(s){e=s,s.i&&(n={t,f:n},t=e.i);continue}}if(e=t){t=e.i;continue}for(;n;)if(e=n.t,n=n.f,e){t=e.i;continue e}break}},Lt=e=>{e.a=void 0,e.e=e.e&-57|4},wt=e=>{let t=e.a,n=t?t.n:e.r;for(;n;)n=Ce(n,e);e.e&=-5},Ct=(e,t)=>{let n,i=0;e:for(;;){let r=e.c,s=r.e,o=!1;if(t.e&16)o=!0;else if((s&17)===17){if(ht(r)){let a=r.o;a.i&&Oe(a),o=!0}}else if((s&33)===33){(e.i||e.u)&&(n={t:e,f:n}),e=r.r,t=r,++i;continue}if(!o&&e.n){e=e.n;continue}for(;i;){--i;let a=t.o,c=a.i;if(c?(e=n.t,n=n.f):e=a,o){if(ht(t)){c&&Oe(a),t=e.s;continue}}else t.e&=-33;if(t=e.s,e.n){e=e.n;continue e}o=!1}return o}},Oe=e=>{do{let t=e.s,n=e.i,i=t.e;(i&48)===32&&(t.e=i|16,i&2&&Ue(t)),e=n}while(e)},Ot=(e,t)=>{let n=t.a;if(n){let i=t.r;do{if(i===e)return!0;if(i===n)break;i=i.n}while(i)}return!1},Je=e=>e.split(".").reduce((t,n)=>t[n],V),Ft=e=>Ke(()=>e.split(".").reduce((t,n)=>t&&Object.hasOwn(t,n)?t[n]:void 0,V)!==void 0),Le=(e,t="")=>{let n=Array.isArray(e);if(n||X(e)){let i=n?[]:{};for(let s in e)i[s]=te(Le(e[s],`${t+s}.`));let r=te(0);return new Proxy(i,{get:(s,o)=>{if(!(o==="toJSON"&&!Object.hasOwn(i,o)))return n&&o in Array.prototype?(r(),i[o]):(Object.hasOwn(i,o)||(i[o]=te(""),H({[t+o]:""}),r(r()+1)),i[o]())},set:(s,o,a)=>{if(n&&o==="length")return i[o]=a,H({[t.slice(0,-1)]:i}),r(r()+1),!0;if(Object.hasOwn(i,o)){if(a==null)return delete i[o],H({[t+o]:null}),r(r()+1),!0;i[o](Le(a,`${t+o}.`))&&H({[t+o]:a})}else{if(a==null)return!0;Object.hasOwn(a,bt)?(i[o]=a,H({[t+o]:""})):(i[o]=te(Le(a,`${t+o}.`)),H({[t+o]:a})),r(r()+1)}return!0},deleteProperty:(s,o)=>(Object.hasOwn(i,o)&&(delete i[o],H({[t+o]:null}),r(r()+1)),!0),ownKeys:()=>(r(),Reflect.ownKeys(i)),has(s,o){return r(),o in i}})}return e},H=e=>{if(e&&m(xe,e),!ke&&!ft(xe)){let t=xe;xe={},document.dispatchEvent(new CustomEvent(Ae,{detail:t}))}},kt=(e,{ifMissing:t}={})=>{me();for(let n in e)e[n]===null||e[n]===void 0?t||delete V[n]:$t(e[n],n,V,"",t);ge()},$t=(e,t,n,i,r)=>{if(X(e)){Object.hasOwn(n,t)&&(X(n[t])||Array.isArray(n[t]))||(n[t]={});for(let s in e)e[s]===null||e[s]===void 0?r||delete n[t][s]:$t(e[s],s,n[t],`${i+t}.`,r)}else r&&Object.hasOwn(n,t)||(n[t]=e)};function Pt({include:e=/.*/,exclude:t=/(?!)/}={},n=V){let i={},r=[[n,""]];for(;r.length;){let[s,o]=r.pop();for(let a in s)X(s[a])?r.push([s[a],`${o+a}.`]):e.test(o+a)&&!t.test(o+a)&&(i[o+a]=Je(o+a))}return m({},i)}var V=Le({}),de={},we=[],Dt=[],fe=new Map,je=null,pe="";function It(e){pe=e}function F(e){return pe?`data-${pe}-${e}`:`data-${e}`}function $e(...e){for(let t of e){let n={plugin:t,actions:de,root:V,filtered:Pt,signal:te,computed:Et,effect:St,mergePatch:kt,peek:Ke,getPath:Je,hasPath:Ft,startBatch:me,endBatch:ge};if(t.type==="action")de[t.name]=t;else if(t.type==="attribute")we.push(t),t.onGlobalInit?.(n);else if(t.type==="watcher")t.onGlobalInit?.(n);else throw U("InvalidPluginType",n)}we.sort((t,n)=>{let i=n.name.length-t.name.length;return i!==0?i:t.name.localeCompare(n.name)}),Dt=we.map(t=>RegExp(`^${t.name}([A-Z]|_|$)`))}function Fe(e){let t=`[${F("ignore")}]`;for(let n of e)if(!n.closest(t))for(let i in n.dataset)Ht(n,i,n.dataset[i])}function ze(e=document.body){queueMicrotask(()=>{Fe([e]),Fe(e.querySelectorAll("*")),je||(je=new MutationObserver(Cn),je.observe(e,{subtree:!0,childList:!0,attributes:!0}))})}function Ht(e,t,n){let i=ee(pe?t.slice(pe.length):t),r=we.find((s,o)=>Dt[o].test(i));if(r){let[s,...o]=i.slice(r.name.length).split(/__+/),a=!!s;a&&(s=ee(s));let c=!!n,l={plugin:r,actions:de,root:V,filtered:Pt,signal:te,computed:Et,effect:St,mergePatch:kt,peek:Ke,getPath:Je,hasPath:Ft,startBatch:me,endBatch:ge,el:e,rawKey:i,key:s,value:n,mods:new Map,runtimeErr:0,rx:0};l.runtimeErr=vt.bind(0,l),l.rx=On(l);let p=r.keyReq||"allowed";if(a){if(p==="denied")throw l.runtimeErr(`${r.name}KeyNotAllowed`)}else if(p==="must")throw l.runtimeErr(`${r.name}KeyRequired`);let f=r.valReq||"allowed";if(c){if(f==="denied")throw l.runtimeErr(`${r.name}ValueNotAllowed`)}else if(f==="must")throw l.runtimeErr(`${r.name}ValueRequired`);if(p==="exclusive"||f==="exclusive"){if(a&&c)throw l.runtimeErr(`${r.name}KeyAndValueProvided`);if(!a&&!c)throw l.runtimeErr(`${r.name}KeyOrValueRequired`)}for(let d of o){let[v,...g]=d.split(".");l.mods.set(ee(v),new Set(g.map(h=>h.toLowerCase())))}let u=r.onLoad(l);if(u){let d=fe.get(e);d?d.get(i)?.():(d=new Map,fe.set(e,d)),d.set(i,u)}}}function Cn(e){let t=`[${F("ignore")}]`;for(let{target:n,type:i,attributeName:r,addedNodes:s,removedNodes:o}of e)if(i==="childList"){for(let a of o)if(Se(a)){let c=fe.get(a);if(fe.delete(a)){for(let l of c.values())l();c.clear()}}for(let a of s)Se(a)&&(Fe([a]),Fe(a.querySelectorAll("*")))}else if(i==="attributes"&&Se(n)&&!n.closest(t)){let a=ee(r.slice(5)),c=n.getAttribute(r);if(c===null){let l=fe.get(n);l&&(l.get(a)?.(),l.delete(a))}else Ht(n,a,c)}}function On(e){let t="",n=e.plugin||void 0;if(n?.isExpr){let f=/(\/(\\\/|[^/])*\/|"(\\"|[^"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;){]*)\s*\)\s*\(\s*\)|[^;])+/gm,u=e.value.trim().match(f);if(u){let d=u.length-1,v=u[d].trim();v.startsWith("return")||(u[d]=`return (${v});`),t=u.join(`;
`)}}else t=e.value.trim();t=t.replace(/\$\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(f,u)=>{let d=Re(e.el);return d?`$${d}.${u}`:`$${u}`}),t=t.replace(/\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(f,u)=>u.endsWith("-")&&f.length<t.length&&t[t.indexOf(f)+f.length]==="$"?(u=u.slice(0,-1),`${u.split(".").reduce((g,h)=>`${g}['${h}']`,"$")}-`):u.split(".").reduce((v,g)=>`${v}['${g}']`,"$"));let i=new Map,r=RegExp(`(?:${Ee})(.*?)(?:${Ne})`,"gm");for(let f of t.matchAll(r)){let u=f[1],d=`dsEscaped${Fn(u)}`;i.set(d,u),t=t.replace(Ee+u+Ne,d)}let s=(f,u)=>`${f}${ue(u).replaceAll(/\./g,"_")}`,o=new Set,a=RegExp(`@(${Object.keys(de).join("|")})\\(`,"gm"),c=[...t.matchAll(a)],l=new Set,p=new Set;if(c.length){let f=`${P}Act_`;for(let u of c){let d=u[1],v=de[d];if(!v)continue;o.add(d);let g=s(f,d);t=t.replace(`@${d}(`,`${g}(`),l.add(g),p.add((...h)=>v.fn(e,...h))}}for(let[f,u]of i)t=t.replace(f,u);e.fnContent=t;try{let f=Function("el","$",...n?.argNames||[],...l,t);return(...u)=>{try{return f(e.el,V,...u,...p)}catch(d){throw e.runtimeErr("ExecuteExpression",{error:d.message})}}}catch(f){throw e.runtimeErr("GenerateExpression",{error:f.message})}}function Fn(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}$e(gt,pt,mt);var _t={type:"action",name:"peek",fn:({peek:e},t)=>e(t)};var Nt={type:"action",name:"setAll",fn:({filtered:e,mergePatch:t,peek:n},i,r)=>{n(()=>{let s=e(r);le(s,()=>i),t(s)})}};var Vt={type:"action",name:"toggleAll",fn:({filtered:e,mergePatch:t,peek:n},i)=>{n(()=>{let r=e(i);le(r,s=>!s),t(r)})}};var qt={type:"attribute",name:"attr",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,key:n,rx:i})=>{let r=(c,l)=>{l===""||l===!0?e.setAttribute(c,""):l===!1||l===null||l===void 0?e.removeAttribute(c):e.setAttribute(c,l)};if(n===""){let c=new MutationObserver(()=>{c.disconnect();let p=i();for(let[f,u]of Object.entries(p))r(f,u);c.observe(e,{attributeFilter:Object.keys(p)})}),l=t(()=>{c.disconnect();let p=i();for(let f in p)r(f,p[f]);c.observe(e,{attributeFilter:Object.keys(p)})});return()=>{c.disconnect(),l()}}let s=M(n),o=new MutationObserver(()=>{o.disconnect();let c=i();r(s,c),o.observe(e,{attributeFilter:[c]})}),a=t(()=>{o.disconnect();let c=i();r(s,c),o.observe(e,{attributeFilter:[c]})});return()=>{o.disconnect(),a()}}};var kn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,$n=/email|password|search|tel|text|url/,Pn=/number|range/,jt={type:"attribute",name:"bind",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:i,effect:r,mergePatch:s,runtimeErr:o,getPath:a,hasPath:c})=>{let l=t?L(t,n):i;if(l=C(l,e,n),e instanceof HTMLInputElement&&$n.test(e.type)||e instanceof HTMLTextAreaElement){if(Array.isArray(c(l)&&a(l))){let v=n.has("scoped")?"__scoped":"",g=document.querySelectorAll(`[${F("bind")}${v}-${t}],[${F("bind")}${v}="${i}"]`),h=0,b={};for(let A of g){if(c(`${l}.${h}`)||(b[`${l}.${h}`]=A.value),e===A)break;h++}s(m({},b));let R=()=>{s(m({},{[`${l}.${h}`]:e.value}))};e.addEventListener("change",R),e.addEventListener("input",R);let E=r(()=>e.value=a(l)[h]);return()=>{E(),e.removeEventListener("change",R),e.removeEventListener("input",R)}}s(m({},{[l]:e.value}),{ifMissing:!0});let u=()=>s(m({},{[l]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.value=a(l));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(e instanceof HTMLInputElement){if(e.type==="checkbox"){if(Array.isArray(c(l)&&a(l))){let g=n.has("scoped")?"__scoped":"",h=document.querySelectorAll(`[${F("bind")}${g}-${t}],[${F("bind")}${g}="${i}"]`),b=0,R={};for(let T of h){if(!c(`${l}.${b}`)){let w=T.getAttribute("value");R[`${l}.${b}`]=w?T.checked?w:"":T.checked}if(e===T)break;b++}s(m({},R));let E=()=>{let T=e.getAttribute("value");s(m({},{[`${l}.${b}`]:T?e.checked?T:"":e.checked}))};e.addEventListener("change",E),e.addEventListener("input",E);let A=r(()=>{let T=e.getAttribute("value");e.checked=T?T===a(l)[b]:a(l)[b]});return()=>{A(),e.removeEventListener("change",E),e.removeEventListener("input",E)}}let u=e.getAttribute("value");s(m({},{[l]:u?e.checked?u:"":e.checked}));let d=()=>{let g=e.getAttribute("value");s(m({},{[l]:g?e.checked?g:"":e.checked}))};e.addEventListener("change",d),e.addEventListener("input",d);let v=r(()=>{let g=e.getAttribute("value");e.checked=g?g===a(l):a(l)});return()=>{v(),e.removeEventListener("change",d),e.removeEventListener("input",d)}}if(e.type==="radio"){e.getAttribute("name")?.length||e.setAttribute("name",l),s(m({},{[l]:e.value}),{ifMissing:!0});let u=()=>e.checked&&s(m({},{[l]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.checked=e.value===a(l));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(Pn.test(e.type)){s(m({},{[l]:+e.value}),{ifMissing:!0});let u=()=>s(m({},{[l]:+e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.value=a(l));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(e.type==="file"){let u=()=>{let d=[...e.files||[]],v=[],g=[],h=[];Promise.all(d.map(b=>new Promise(R=>{let E=new FileReader;E.onload=()=>{if(typeof E.result!="string")throw o("InvalidFileResultType",{resultType:typeof E.result});let A=E.result.match(kn);if(!A?.groups)throw o("InvalidDataUri",{result:E.result});v.push(A.groups.contents),g.push(A.groups.mime),h.push(b.name)},E.onloadend=()=>R(),E.readAsDataURL(b)}))).then(()=>{s(m({},{[l]:v,[`${l}Mimes`]:g,[`${l}Names`]:h}))})};return e.addEventListener("change",u),e.addEventListener("input",u),()=>{e.removeEventListener("change",u),e.removeEventListener("input",u)}}}if(e instanceof HTMLSelectElement){if(e.multiple){s(m({},{[l]:[...e.selectedOptions].map(b=>b.value)}),{ifMissing:!0});let g=()=>s(m({},{[l]:[...e.selectedOptions].map(b=>b.value)}));e.addEventListener("change",g),e.addEventListener("input",g);let h=r(()=>{let b=a(l);for(let R of e.options)R.selected=b.includes(R.value)});return()=>{h(),e.removeEventListener("change",g),e.removeEventListener("input",g)}}s(m({},{[l]:e.value}),{ifMissing:!0});let u=()=>s(m({},{[l]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let v=r(()=>e.value=a(l));return()=>{v(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}s(m({},{[l]:e.getAttribute("value")}),{ifMissing:!0});let p=new MutationObserver(()=>{s(m({},{[l]:e.getAttribute("value")}))});p.observe(e,{attributeFilter:["value"]});let f=r(()=>e.setAttribute("value",a(l)));return()=>{f(),p.disconnect()}}};var Gt={type:"attribute",name:"class",valReq:"must",isExpr:!0,onLoad:({key:e,el:t,effect:n,mods:i,rx:r})=>{let s=new Set,o=!1,a=new MutationObserver(()=>{o||s.clear()}),c=n(()=>{o=!0,a.disconnect();for(let p of s)t.classList.remove(p);s.clear();let l=e===""?r():{[L(M(e),i)]:r()};for(let[p,f]of Object.entries(l))if(f){let u=p.split(/\s+/).filter(d=>d.length>0);for(let d of u)t.classList.add(d),s.add(d)}o=!1,a.observe(t,{attributeFilter:["class"]})});return()=>{a.disconnect();for(let l of s)t.classList.remove(l);c()}}};var q=`${P}-sse`,Pe="started",De="finished",Wt="error",Kt="retrying",Ut="retrying";function Ie(e,t){document.addEventListener(q,n=>{if(n.detail.type===e){let{argsRaw:i}=n.detail;t(i)}})}var Bt={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,mergePatch:i,value:r})=>{let s=t?L(t,n):r;s=C(s,e,n),i(m({},{[s]:!1}),{ifMissing:!0});let o=a=>{let{type:c,el:l}=a.detail;if(l===e)switch(c){case Pe:i(m({},{[s]:!0}));break;case De:i(m({},{[s]:!1}));break}};return document.addEventListener(q,o),()=>{i(m({},{[s]:!1})),document.removeEventListener(q,o)}}};var Jt={type:"attribute",name:"jsonSignals",keyReq:"denied",onLoad:({el:e,effect:t,value:n,filtered:i,mods:r})=>{let s=r.has("terse")?0:2,o={};n&&(o=Te(n));let a=()=>{c.disconnect(),e.textContent=JSON.stringify(i(o),null,s),c.observe(e,{childList:!0})},c=new MutationObserver(a),l=t(a);return()=>{c.disconnect(),l()}}};function j(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function B(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function Qe(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function Dn(e,t,n=!1,i=!0){let r=0;return(...s)=>{r&&clearTimeout(r),n&&!r&&e(...s),r=setTimeout(()=>{i&&e(...s),r&&clearTimeout(r)},t)}}function In(e,t,n=!0,i=!1){let r=!1;return(...s)=>{r||(n&&e(...s),r=!0,setTimeout(()=>{r=!1,i&&e(...s)},t))}}function He(e,t){let n=t.get("delay");if(n){let s=j(n);e=Qe(e,s)}let i=t.get("debounce");if(i){let s=j(i),o=B(i,"leading",!1),a=!B(i,"notrail",!1);e=Dn(e,s,o,a)}let r=t.get("throttle");if(r){let s=j(r),o=!B(r,"noleading",!1),a=B(r,"trail",!1);e=In(e,s,o,a)}return e}var _e=!!document.startViewTransition;function G(e,t){if(t.has("viewtransition")&&_e){let n=e;e=(...i)=>document.startViewTransition(()=>n(...i))}return e}var zt={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:i,rx:r,startBatch:s,endBatch:o}=e,a=t;i.has("window")&&(a=window);let c=f=>{if(f){if(i.has("prevent")&&f.preventDefault(),i.has("stop")&&f.stopPropagation(),!(f.isTrusted||f instanceof CustomEvent||i.has("trust")))return;e.evt=f}s(),r(f),o()};c=He(c,i),c=G(c,i);let l={capture:i.has("capture"),passive:i.has("passive"),once:i.has("once")};if(i.has("outside")){a=document;let f=c;c=u=>{t.contains(u?.target)||f(u)}}let p=M(n);if(p=L(p,i),(p===q||p===Ae)&&(a=document),t instanceof HTMLFormElement&&p==="submit"){let f=c;c=u=>{u?.preventDefault(),f(u)}}return a.addEventListener(p,c,l),()=>{a.removeEventListener(p,c)}}};var Ze=new WeakSet,Qt={type:"attribute",name:"onIntersect",keyReq:"denied",onLoad:({el:e,mods:t,rx:n,startBatch:i,endBatch:r})=>{let s=()=>{i(),n(),r()};s=He(s,t),s=G(s,t);let o={threshold:0};t.has("full")?o.threshold=1:t.has("half")&&(o.threshold=.5);let a=new IntersectionObserver(c=>{for(let l of c)l.isIntersecting&&(s(),a&&Ze.has(e)&&a.disconnect())},o);return a.observe(e),t.has("once")&&Ze.add(e),()=>{t.has("once")||Ze.delete(e),a&&(a.disconnect(),a=null)}}};var Zt={type:"attribute",name:"onInterval",keyReq:"denied",valReq:"must",onLoad:({mods:e,rx:t,startBatch:n,endBatch:i})=>{let r=()=>{n(),t(),i()};r=G(r,e);let s=1e3,o=e.get("duration");o&&(s=j(o),B(o,"leading",!1)&&r());let a=setInterval(r,s);return()=>{clearInterval(a)}}};var Yt={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({rx:e,mods:t,startBatch:n,endBatch:i})=>{let r=()=>{n(),e(),i()};r=G(r,t);let s=0,o=t.get("delay");o&&(s=j(o)),r=Qe(r,s),r()}};var Xt={type:"attribute",name:"ref",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:i,mergePatch:r})=>{let s=t?L(t,n):i;s=C(s,e,n),r(m({},{[s]:e}))}};var en={type:"attribute",name:"scope",keyReq:"denied",onLoad:({el:e,value:t,mods:n,mergePatch:i})=>{let r=t||`_${crypto.randomUUID()}`;e.parentElement&&(r=C(r,e.parentElement,n));let s=r.split(".").reduceRight((o,a)=>({[a]:o}),{});return i(s),e.setAttribute("data-scope",r),e.removeAttribute("data-scope__scoped"),()=>{let a=r.split(".").reduceRight((c,l)=>({[l]:c}),null);i(a)}}};var tn="none",nn="display",rn={type:"attribute",name:"show",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{r.disconnect(),n()?e.style.display===tn&&e.style.removeProperty(nn):e.style.setProperty(nn,tn),r.observe(e,{attributeFilter:["style"]})},r=new MutationObserver(i),s=t(i);return()=>{r.disconnect(),s()}}};var on={type:"attribute",name:"text",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{r.disconnect(),e.textContent=`${n()}`,r.observe(e,{childList:!0})},r=new MutationObserver(i),s=t(i);return()=>{r.disconnect(),s()}}};var J=(e,t,n)=>document.dispatchEvent(new CustomEvent(q,{detail:{type:e,el:t,argsRaw:n}})),sn=e=>`${e}`.includes("text/event-stream"),cn=async({el:e,evt:t,filtered:n,runtimeErr:i},r,s,{selector:o,headers:a,contentType:c="json",filterSignals:l={include:/.*/,exclude:/(^|\.)_/},openWhenHidden:p=!1,retryInterval:f=nt,retryScaler:u=2,retryMaxWaitMs:d=3e4,retryMaxCount:v=10,abort:g}={})=>{let h=r.toLowerCase(),b=()=>{};try{if(!s?.length)throw i("SseNoUrlProvided",{action:h});let R={Accept:"text/event-stream, text/html, application/json",[tt]:!0};c==="json"&&(R["Content-Type"]="application/json");let E=Object.assign({},R,a),A={method:r,headers:E,openWhenHidden:p,retryInterval:f,retryScaler:u,retryMaxWaitMs:d,retryMaxCount:v,signal:g,onopen:async y=>{y.status>=400&&J(Wt,e,{status:y.status.toString()})},onmessage:y=>{if(!y.event.startsWith(P))return;let W=y.event,D={};for(let O of y.data.split(`
`)){let S=O.indexOf(" "),x=O.slice(0,S),z=O.slice(S+1);(D[x]||=[]).push(z)}let K=Object.fromEntries(Object.entries(D).map(([O,S])=>[O,S.join(`
`)]));J(W,e,K)},onerror:y=>{if(sn(y))throw i("InvalidContentType",{url:s});y&&(console.error(y.message),J(Kt,e,{message:y.message}))}},T=new URL(s,window.location.href),w=new URLSearchParams(T.search);if(c==="json"){let y=JSON.stringify(n(l));r==="GET"?w.set(P,y):A.body=y}else if(c==="form"){let y=o?document.querySelector(o):e.closest("form");if(!y)throw i(o?"SseFormNotFound":"SseClosestFormNotFound",{action:h,selector:o});if(!y.checkValidity()){y.reportValidity(),b();return}let W=new FormData(y),D=e;if(e===y&&t instanceof SubmitEvent)D=t.submitter;else{let S=x=>x.preventDefault();y.addEventListener("submit",S),b=()=>y.removeEventListener("submit",S)}if(D instanceof HTMLButtonElement){let S=D.getAttribute("name");S&&W.append(S,D.value)}let K=y.getAttribute("enctype")==="multipart/form-data";K||(E["Content-Type"]="application/x-www-form-urlencoded");let O=new URLSearchParams(W);if(r==="GET")for(let[S,x]of O)w.append(S,x);else K?A.body=W:A.body=O}else throw i("SseInvalidContentType",{action:h,contentType:c});J(Pe,e,{}),T.search=w.toString();try{await qn(T.toString(),e,A)}catch(y){if(!sn(y))throw i("SseFetchFailed",{method:r,url:s,error:y})}}finally{J(De,e,{}),b()}};async function Hn(e,t){let n=e.getReader(),i=await n.read();for(;!i.done;)t(i.value),i=await n.read()}function _n(e){let t,n,i,r=!1;return function(o){t?t=Vn(t,o):(t=o,n=0,i=-1);let a=t.length,c=0;for(;n<a;){r&&(t[n]===10&&(c=++n),r=!1);let l=-1;for(;n<a&&l===-1;++n)switch(t[n]){case 58:i===-1&&(i=n-c);break;case 13:r=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(c,l),i),c=n,i=-1}c===a?t=void 0:c&&(t=t.subarray(c),n-=c)}}function Nn(e,t,n){let i=an(),r=new TextDecoder;return function(o,a){if(!o.length)n?.(i),i=an();else if(a>0){let c=r.decode(o.subarray(0,a)),l=a+(o[a+1]===32?2:1),p=r.decode(o.subarray(l));switch(c){case"data":i.data=i.data?`${i.data}
${p}`:p;break;case"event":i.event=p;break;case"id":e(i.id=p);break;case"retry":{let f=+p;Number.isNaN(f)||t(i.retry=f);break}}}}}var Vn=(e,t)=>{let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},an=()=>({data:"",event:"",id:"",retry:void 0});function qn(e,t,{signal:n,headers:i,onopen:r,onmessage:s,onclose:o,onerror:a,openWhenHidden:c,fetch:l,retryInterval:p=1e3,retryScaler:f=2,retryMaxWaitMs:u=3e4,retryMaxCount:d=10,overrides:v,...g}){return new Promise((h,b)=>{let R={accept:"text/event-stream",...i},E;function A(){E.abort(),document.hidden||O()}c||document.addEventListener("visibilitychange",A);let T=0;function w(){document.removeEventListener("visibilitychange",A),window.clearTimeout(T),E.abort()}n?.addEventListener("abort",()=>{w(),h()});let y=l||window.fetch,W=r||(()=>{}),D=0,K=p;async function O(){E=new AbortController;try{let S=await y(e,{...g,headers:R,signal:E.signal});D=0,p=K,await W(S);let x=async($,Q,oe,Z,...Y)=>{let ve={[oe]:await Q.text()};for(let he of Y){let be=Q.headers.get(`datastar-${M(he)}`);if(Z){let se=Z[he];se&&(be=typeof se=="string"?se:JSON.stringify(se))}be&&(ve[he]=be)}J($,t,ve),w()},z=S.headers.get("Content-Type");if(z?.includes("text/html"))return await x(ae,S,"elements",v,"selector","mode","useViewTransition");if(z?.includes("application/json"))return await x(ce,S,"signals",v,"onlyIfMissing");if(z?.includes("application/javascript")){let $=document.createElement("script"),Q=S.headers.get("datastar-script-attributes");if(Q)for(let oe of Q.split(",")){let[Z,Y]=oe.split("=");$.setAttribute(Z,Y||"")}$.textContent=await S.text(),document.head.appendChild($),w();return}await Hn(S.body,_n(Nn($=>{$?R["last-event-id"]=$:delete R["last-event-id"]},$=>{K=p=$},s))),o?.(),w(),h()}catch(S){if(!E.signal.aborted)try{let x=a?.(S)||p;window.clearTimeout(T),T=window.setTimeout(O,x),p=Math.min(p*f,u),++D>=d?(J(Ut,t,{}),w(),b("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${x}ms.`)}catch(x){w(),b(x)}}}O()})}var I=(e,t)=>({type:"action",name:e,fn:(n,i,r)=>cn(n,t,i,r)});var ln=I("delete","DELETE");var un=I("get","GET");var fn=I("patch","PATCH");var dn=I("post","POST");var pn=I("put","PUT");var bn={type:"watcher",name:ae,async onGlobalInit(e){Ie(ae,t=>jn(e,t))}};function jn(e,{elements:t,selector:n,mode:i=ut,useViewTransition:r}){if(i===qe&&n){let s=document.querySelectorAll(n);if(!s.length)throw U("NoTargetsFound",e,{selectorOrId:n});if(r&&_e)document.startViewTransition(()=>{for(let o of s)o.remove()});else for(let o of s)o.remove()}else{let s=document.createElement("template");s.innerHTML=t;for(let o of[...s.content.childNodes]){let a=o.nodeType;if(a!==1){if(a===3&&!o.nodeValue.trim())continue;throw U("NoElementsFound",e)}let c=n||`#${o.id}`,l=document.querySelectorAll(c);if(!l.length)throw U("NoTargetsFound",e,{selectorOrId:c});r&&_e?document.startViewTransition(()=>yn(e,i,o,l)):yn(e,i,o,l)}}}var mn=new WeakSet;function gn(e){let t=e instanceof HTMLScriptElement?[e]:e.querySelectorAll("script");for(let n of t)if(!mn.has(n)){let i=document.createElement("script");for(let{name:r,value:s}of n.attributes)i.setAttribute(r,s);i.text=n.text,n.replaceWith(i),mn.add(i)}}function yn(e,t,n,i){for(let r of i)if(t===qe)r.remove();else if(t===Ve||t===rt)Gn(r,n,t),gn(r);else{let s=n.cloneNode(!0);if(t===ot)r.replaceWith(s);else if(t===st)r.prepend(s);else if(t===at)r.append(s);else if(t===ct)r.before(s);else if(t===lt)r.after(s);else throw U("InvalidPatchMode",e,{mode:t});gn(s)}}var ne=new Map,k=new Map,ie=new Set,ye=new Set,re=document.createElement("div");re.hidden=!0;function Gn(e,t,n){let i=F("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i)||e.parentElement?.closest(`[${i}]`))return;let r=document.createElement("div");r.append(t),document.body.insertAdjacentElement("afterend",re);let s=e.querySelectorAll("[id]");for(let{id:a,tagName:c}of s)ne.has(a)?ye.add(a):ne.set(a,c);e.id&&(ne.has(e.id)?ye.add(e.id):ne.set(e.id,e.tagName)),ie.clear();let o=r.querySelectorAll("[id]");for(let{id:a,tagName:c}of o)ie.has(a)?ye.add(a):ne.get(a)===c&&ie.add(a);ne.clear();for(let a of ye)ie.delete(a);ye.clear(),k.clear(),hn(n==="outer"?e.parentElement:e,s),hn(r,o),En(n==="outer"?e.parentElement:e,r,n==="outer"?e:null,e.nextSibling),re.remove()}function En(e,t,n=null,i=null){e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),n??=e.firstChild;for(let r of t.childNodes){if(n&&n!==i){let o=Wn(r,n,i);if(o){if(o!==n){let a=n;for(;a&&a!==o;){let c=a;a=a.nextSibling,Xe(c)}}Ye(o,r),n=o.nextSibling;continue}}let s=r.id;if(r instanceof Element&&ie.has(s)){let o=window[s],a=o;for(;a=a.parentNode;){let c=k.get(a);c&&(c.delete(s),c.size||k.delete(a))}Sn(e,o,n),Ye(o,r),n=o.nextSibling;continue}if(k.has(r)){let o=document.createElement(r.tagName);e.insertBefore(o,n),Ye(o,r),n=o.nextSibling}else{let o=document.importNode(r,!0);e.insertBefore(o,n),n=o.nextSibling}}for(;n&&n!==i;){let r=n;n=n.nextSibling,Xe(r)}}function Wn(e,t,n){let i=null,r=e.nextSibling,s=0,o=0,a=k.get(e)?.size||0,c=t;for(;c&&c!==n;){if(vn(c,e)){let l=!1,p=k.get(c),f=k.get(e);if(f&&p){for(let u of p)if(f.has(u)){l=!0;break}}if(l)return c;if(!i&&!k.has(c)){if(!a)return c;i=c}}if(o+=k.get(c)?.size||0,o>a||(i===null&&r&&vn(c,r)&&(s++,r=r.nextSibling,s>=2&&(i=void 0)),c.contains(document.activeElement)))break;c=c.nextSibling}return i||null}function vn(e,t){let n=e.id;return e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!n||n===t.id)}function Xe(e){k.has(e)?Sn(re,e,null):e.parentNode?.removeChild(e)}var Sn=Xe.call.bind(re.moveBefore??re.insertBefore);function Ye(e,t){let n=t.nodeType;if(n===1){let i=F("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i))return e;let r=t.getAttribute(F("preserve-attr"))?.split(" ");for(let{name:o,value:a}of t.attributes)e.getAttribute(o)!==a&&!r?.includes(M(o))&&e.setAttribute(o,a);let s=e.attributes;for(let o=s.length-1;o>=0;o--){let{name:a}=s[o];!t.hasAttribute(a)&&!r?.includes(M(a))&&e.removeAttribute(a)}if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&t.type!=="file"){let o=F("bind").slice(5),a=!0;for(let c in t.dataset)if(c.startsWith(o)){a=!1;break}if(a){let c=t.value;t.hasAttribute("value")?e.value!==c&&(e.setAttribute("value",c),e.value=c):(e.value="",e.removeAttribute("value"))}}else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let o=t.value;o!==e.value&&(e.value=o),e.firstChild&&e.firstChild.nodeValue!==o&&(e.firstChild.nodeValue=o)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e.isEqualNode(t)||En(e,t),e}function hn(e,t){for(let n of t)if(ie.has(n.id)){let i=n;for(;i&&i!==e;){let r=k.get(i);r||(r=new Set,k.set(i,r)),r.add(n.id),i=i.parentElement}}}var Rn={type:"watcher",name:ce,onGlobalInit:e=>Ie(ce,({signals:t="{}",onlyIfMissing:n=`${it}`})=>e.mergePatch(Te(t),{ifMissing:dt(n)}))};$e(un,dn,pn,fn,ln,bn,Rn,qt,jt,Gt,Bt,Jt,zt,Qt,Zt,Yt,Xt,en,rn,on,_t,Nt,Vt);ze();export{ze as apply,$e as load,It as setAlias};
//# sourceMappingURL=datastar.js.map
